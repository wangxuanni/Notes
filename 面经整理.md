看到



先讲了下 HTTP 和 HTTPS 的区别，然后讲下 HTTPs 为什么安全，如何加密的，对称加密是什么，公钥私钥怎么用，然后讲到证书，为什么有证书，证书安全吗，如何保证证书不被窜改，但是我当时好像没讲到数字加密这块，然后面试官对我这块回答不是很满意。

qps和tps、头条用go

[TOC]



## 推荐链接

操作系统视频-北大陈向群 https://www.bilibili.com/video/av20528688

计算机组成原理-哈工大刘宏伟 https://www.bilibili.com/video/av15123338

还有我推荐极客时间里面老师的课程：

- 王争老师---数据结构与算法之美（在吴师兄的安利下买的，强烈推荐啊啊啊啊，真 的讲的特别好，[听说最近出了一门新课](http://mp.weixin.qq.com/s?__biz=MzUyNjQxNjYyMg==&mid=2247484992&idx=1&sn=9e2639ffb61adea55e33b647ad25fd09&chksm=fa0e69c1cd79e0d7473ea559314124b09145a35a5654746a8126b934499c5a85ea0190f02b6a&scene=21#wechat_redirect)）
- 刘超老师---趣谈网络协议（讲的也不错）

Github 上开源的哈工大《操作系统》课程给大家吧！地址：https://github.com/hoverwinter/HIT-OSLab 。

对于 Linux 我们要掌握基本的使用就需要对一些常用命令非常熟悉比如：目录切换命令、目录操作命令、文件的操作命令、压缩或者解压文件的命令等等。

是如果你是java或者c++出身的话，在语言特性上可能会需要适应，如果用Python按照c++的逻辑写代码那将会是又臭又长，不简洁。 推荐大家看看这本书：

Effective python ：https://book.douban.com/subject/26709315/ 我目前正在读的一本书 非常好的解释了一些细节，以及Python的一些和其他语言不通的特性，如果将这些东西熟悉将会让你事半功倍。 其次呢可以看看廖雪峰的Python入门教程

操作系统的话原理大家都懂，但是一问深的就不知道了，什么进程线程，调度算法，虚拟地址这些的问题早就被问烂了。但是如果直接去看linux源码的话，相信大家和我一样刚开始都是拒绝的。还是直接怼书吧，基础最重要:

深入理解计算机系统 ：经典！太好看了！ Linux内核设计与实现：不算系统但是算入门级别 建议和操作系统的课本结合一起看会更好 深入理解linux内核 ：讲的2.6版本的内核 建议先把上面的几本书看看，然后看自己的兴趣吧，如果对哪块很感兴趣那就去看源码看实现吧。

redis的持久化、哨兵、cluster**

这些都是老生常谈的问题，基本上你只要看过**石杉老师的亿级流量课程**，都可以轻松的回答。

 **《网络是怎样连接的》** 、**《图解 HTTP》**

http://www.w3school.com.cn/ 

 **《SQL 基础教程（第 2 版）》**（入门级）、**《高性能 MySQL : 第 3 版》**(进阶)、**《MySQL 必知必会》**。

MySQL 学习资源推荐以及重要知识点总结： https://github.com/Snailclimb/JavaGuide/blob/master/docs/database/MySQL.md

《分布式服务框架原理与实践》

上面那本书讲的是分布式架构的实践，而这本书更专注于分布式服务的原理讲解和对应实践，很好地讲述了分布式服务的基本概念，相关技术，以及解决方案等，对于想要学习分布式服务框架的同学来说是本好书。

《从Paxos到Zookeeper分布式一致性原理与实践》

说起分布式系统，我们需要了解它的原理，相关理论及技术，这本书也是从这个角度出发，讲解了分布式系统的一些常用概念，并且带出了分布式一哥zookeeper，可以说是想学分布式技术的同学必看的书籍。

《大数据技术原理与应用》

作为大数据方面的一本教材，厦大教授写的这本书还是非常赞的，从最基础的原理方面讲解了Hadoop的生态系统，并且把每个组件的原理都讲得比较清楚，另外也加入了spark，storm等内容，可以说是大数据入门非常好的一本书了。

江南白衣的书单

http://calvin1978.blogcn.com/articles/javabookshelf.html

 CoolShell

陈皓老师的博客相信大家都看过，干货很多，酷壳应该算是国内最有影响力的个人博客了。

4 廖雪峰

学习Git和Python，看它的博客就够了。

**5 HollisChuang**

阿里一位研发大佬的博客，主要分享Java技术文章，内容还不错。
    

6 梁桂钊

阿里另一位研发大佬，博客里的后端技术文章非常丰富

**7 chenssy**

这位大佬分享的Java技术文章也很多，并且有很多基础方面的文章，新手可以多看看。

 CoolShell

陈皓老z的博客相信大家都看过，干货很多，酷壳应该算是国内最有影响力的个人博客了。

**5 HollisChuang**

阿里一位研发大佬的博客，主要分享Java技术文章，内容还不错。

6 梁桂钊

阿里另一位研发大佬，博客里的后端技术文章非常丰富。

**7 chenssy**位大佬分享的Java技术文章也很多，并且有很多基础方面的文章，新手可以多看看。

8 Java Doop

一位魔都Java开发者的技术博客，里面有一些不错的讲解源码的文章，数量不是很多，但是质量都挺不错的。

1 importnew 专注Java学习资源分享，适合Java初学者。

2 并发编程网，主要分享Java相关进阶内容，适合Java提高。

3 推酷 一个不错的技术分享社区。

4 segmentfault，有点像国内的Stack Overflow，适合交流代码问题的地方。

5 掘金，一个很有极客范的技术社区，强推，有很多技术大牛分享优质文章。

6 开发者头条，一个整合优质技术博客的社区，里面基本上都是精选的高质量博文，适合技术学习提升。

### 

尚硅谷的mysql高级部分的课程，关于mysql的查询优化以及其他的高级特性都是书本上很少有的。很多的数据库难题都是这上面出现的。 Redis建议看看Redis设计与实现这本书，非常详细的讲了Redis的底层数据结构，包括其复制，集群部分也做了很好的解释。然后的话可以再去理解一下分布式的Raft算法，Gossip协议等等。 数据库就是多用多学，个人建议用学一学docker，以后配置这些服务非常方便，也是现在云计算的一个很重要的组件。

学习 **Dubbo、Zookeeper**、常见的**消息队列**（比如**ActiveMq、RabbitMQ**）、**Redis** 、**Elasticsearch** 的使用（这些东西可以通过黑马视频最后一个分布式项目来学，边看视频，边自己做，查阅网上博客，效果更好）。一定要学会拓展知识，养成自主学习的意识。黑马项目对这些知识点的介绍都比较蜻蜓点水。

现在微服务特别火，很多公司在面试也明确要求需要微服务方面的知识。如果有精力的话可以去学一下SpringCloud生态系统以及其他微服务常用框架。





## 计划

### 大数据猿

①剑指offer有些搞不懂的直接跳过，等下个月第二遍再刷；

②数据结构重点是各种树、二叉树、红黑树的一些特性以及链表的特性；

③JavaSE主要是类对象接口的区别，能不能继承，Static的特点，各种Hashmap，ArrayList等集合框架的原理源码；

④JVM是根据网上整合的高频面试题进行学习的，刷了一遍面试题之后才去看周志华的《深入理解Java虚拟机》，JVM难的不是JVM布局，垃圾回收算法等这些理论，而是结合代码和项目场景。比如说一段代码，有很多个类、方法，其中又有静态类和全局变量，这时候项目跑起来的时候哪些先加载，哪些变量存放在哪个区，不止要懂理论，还要结合代码懂理论。还有就是项目中的OOM，栈溢出，JVM的参数调优等等。

⑤多线程也是刷网上面试题和博客的，几本多线程的书都是一坨一坨的，理解不来。先动手把几个多线程实现方法实现了一遍，然后分析优缺点，再由此切进去线程不安全和各种锁。多线程学习不同JVM，自己多动手，多调试一下，控制台都会告诉你答案。

三月：

剑指offer二刷，数据库、操作系统、网络、准备面试

①剑指offer第二遍重点刷第一遍时思路懂代码不懂的。

②数据库刷了牛客网SQL实战100多题的，其他都是索引原理，悲观乐观锁等理论。

③操作系统刷高频面试题。死锁的产生条件、解决方法等等，资源调度算法，并发和并行等。

④网络也是刷面试题。三次握手四次挥手以及为什么要这样做、TCP和UDP、网页请求过程、DNS解析过程、网络模型、响应码的意思等。

⑤我每刷一道算法或者理解了一道面试题都会进行整理，所以到面试之前看看整理的文档和博客就行，异常轻松。这个月也继续投递简历进行面试，从三月份开始都是边投边准备，不存在全部准备好再去投。

三月份收了京东、瓜子二手车等二线大厂的offer。

四月：

大数据项目、手写剑指offer、继续面试

①三月份被阿里菜鸟部门的三面面试官怼了一发，说简历没有大数据项目面大数据岗，理论会再多有什么用，于是打算在四月份补一下项目。

②在补项目的同时，不忘算法，练习白板写代码。

四月份收了腾讯、去哪儿一些offer，腾讯和去哪儿终面都得现场面，所以一天飞北京，一天飞深圳。拿到腾讯offer的时候跟HR商量能不能去上海或者北京的base，HR说不行，于是就没去了。选工作和生活城市有一个硬性标准：离家远！那些在北方读书的同学毕业之后一直要往家里跑，而我则是一直往外跳，或许是因为在厦门待了四年吧，家乡也是「围城」啊。

5-12月：

实习，看框架源码，面试，整理面经



最后选择了去Kyligence实习了，刚好趁这个机会学习了Kylin源码，看了Hadoop和Spark的部分源码。后面的面试也是为了倒逼自己学习，在面试中找不足，也顺便整理了一些面试资料。

### 黄小斜

他的bat面经也挺好的

**我花了大概一个月的时间完成了两个项目的开发，当然主要也是模仿两个开源项目做了，这两个项目都使用SpringBoot快速开发，并且用到一些常用的后端技术比如redis，云存储，以及一些常见Web框架，除此之外还涉及到了solr，爬虫等技术。虽然项目不算很难，但是我在这段时间里很快地熟悉了完整项目开发的流程，并且每天做迭代，通过Git来跟进版本，每个版本都会写清所做的内容，这也让我对项目的架构非常熟悉。**



搞定剑指offer之后，当然还要刷LeetCode了，LeetCode题目这么多，怎么选择呢，我没有按照tag刷，也没有按照顺序刷，而是参考当时一个大佬的LeetCode刷题指南来进行刷题的，他把每个类型的题目都做了归纳，每部分只放一些比较经典的题目。所以我前后大概刷了100多道LeetCode的题目，并且在第二遍刷题复习的时候，我也对这些题目做了一份总结。cyc是

**除了上面两个经典题库，我还着重刷了大厂的历年真题，这部分我主要是通过牛客网的历年真题题库来完成刷题的。说实话，真题是非常重要的，因为公司出的题目不像平时的那些算法题，可能会出得非常奇葩，所以你如果不提前适应的话会比较吃亏。完成这部分题目之后，我对算法题的复习也基本告一段落了。**



在Java网络编程方面，我先从最基础的socket入手，再讲到NIO,AIO，并且加入了几篇对Linux IO模型解析的文章，让整个知识体系更加完整（因为NIO是基于Linux Epoll实现的），接着我又加入了对Netty的探讨，以及Tomcat中对NIO的应用，可以说是把Java网络编程一些比较重要的部分都囊括进来了。**为了更好理解这部分内容，我也在网上参考了很多客户端和服务端通信的demo，最后我分别用Socket，NIO,AIO以及Netty把C/S 通信的demo都写了一遍。**

在JVM虚拟机方面，我则按照《深入理解JVM虚拟机》这本书的行文脉络进行文章的整理。**在搞定JVM基本原理以后，我着重了解了JVM调优和实践中常遇到的问题，并且整理了常用的JVM调优工具，场景问题以及调优实践的案例，这也是因为面试中对JVM调优实践越来越重视了。**



**在数据库和缓存方面，我主要学习了MySQL和Redis这两种最常用的数据库。对于Mysql，我从简单的sql开始了解，然后开始了解sql优化，MySQL的存储引擎和索引，事务及锁，还有更复杂的主从复制，分库分表等内容。对于Redis，我也是从简单的api入手，然后去了解每一种数据结构的底层实现原理，接着尝试去学习Redis的持久化方式，以及作为缓存常需要考虑的技术点，当然，也包括Redis的分布式锁实现，以及它的分布式集群方案。**



### 文科生

- 暑假补了补Java的并发、NIO相关的基础，写了一个聊天室项目（不知道为啥后来就100+star了…）https://github.com/songxinjianqwe/Chat；然后是读了一些并发的书《Java并发编程实战》。
- 然后是想起学JavaSE时候有个教程教如何手写（只用JavaSE API）一个WebServer，然后就模仿着自己写了一个，最初的版本也就1000行，后来春招又完善了一下。
- 当然又补了一些框架/中间件，比如SpringBoot、Dubbo、RocketMQ的学习，又写了一堆demo。有一个demo（自己）觉得还不错的，就是自己在本机上搞了一堆虚拟机模拟分布式，分库分表，还有用MQ来解分布式事务的问题（其实也没啥技术含量，只不过比单机的demo强一点…）
- 学框架/中间件的教程（一些什么架构师教程233…）中看到了Netty，了解到Netty是一个网络编程框架，做分布式网络通信的（也就是做中间件的，不是搞应用开发的），读了《Netty权威指南》，又写了一些demo。
- 再后来…一言难尽，自制力不足去打王者荣耀了emmmm。
- 大三上的话课程也是有点多的，还有课程设计，为了课程设计学了Vue.js和PHP（这部分对找工作来说实践证明是没用的…），然后想要读一读框架源码的，就花了大概一两周读了Spring源码，读了《Spring源码深度解析》，还写了一些源码解析文章（当然和网上流传的大同小异https://blog.csdn.net/songxinjianqwe/article/details/78829923），然后又自己模仿着《架构探险-从零开始写JavaWeb框架》，自己又写了一个简化版的Spring IOC+AOP（不过后面面试的时候讲这个项目讲着讲着就讲到了Spring源码）https://github.com/songxinjianqwe/Mini-Rest。
- 大三上快结束的时候意识到马上要决定以后的去向了，顿时慌得一批，自己分析了一下去向。成绩应该能保研，但是最后是放弃了，给自己找了一些理由：
- 只能保研本校本专业，不能去更好的学校
- 读研最好是能搞机器学习之类的，做Java开发搬砖啥的好像也不用读研
- 懒吧，觉得要读研就要在两年后再经历一场春招秋招…还不如现在把这个事解决掉，要不又要提心吊胆担心失业
- 另外自己觉得前两年也算是为找工作做了一点准备，也不至于说从零开始
  决定了之后就开始迷茫，不知道要学哪些东西，学到什么程度。然后就花了好几天的时间去牛客网上找面经，大概看了有100篇+的面经，把问题分类都记了下来，算是心里有了点底。
- 因为学了Netty、Dubbo等技术，打算再深入一点，把Netty用在一个稍微正式一点的项目上，不要只停留在demo上。所以花了一些时间手写了一个RPC框架，最初版本也就1000+行。https://github.com/songxinjianqwe/toy-rpc
- 这个时候觉得写一些网站的（尤其是非正式上线的项目，自己写着玩的）之类的写不出什么花来，翻来覆去还是用别人的东西。但是面试，尤其是阿里巴巴，对原理要求挺高的，你在项目里用了啥，你最好是能说得出来它是怎么work的。如果自己去造个轮子之类的，你会对某个组件或框架变得很熟悉，比读一遍源码在理解上要深一些（而且没有SSM那么low…）。
- 之后打算先做点新的东西，总不能跟春招一个水平吧。然后就花了两个多周（主要是晚上和周末）把RPC项目重新写了一遍（模仿着Dubbo的分层结构），最后大概有4000行左右。
- 另外抽时间把Dubbo、RocketMQ等中间件的源码也看了一遍。
- 之后就决心要离职了，白天也开始复习春招时候的笔记，复习了大概一周，然后就离职了。
- Java方向的话最好是写点有自己思考的项目，不仅限于CRUD的那种。比如我简历中写了4个项目，一个是Web项目，其他都是小轮子，大部分面试官明显都对小轮子感兴趣，对全是套路的JavaWeb项目感觉兴趣不大。
- 简历中项目中的各个实现要尽量熟悉，如果做得时间久了，可以考虑画一个类图或者时序图来加深印象



### 工作两三年的一二面

**（1）一面：基础**

一面面试官一般是团队里比较资深的工程师，进去之后的同事。而一面一般会问的基础内容包括：**集合、网络、IO、并发、基本数据结构和算法、JVM。**

根据楼主的面试经历，如果是面试互联网公司，一面一般都会挑出上述所说的一个或几个专题提问。

数据结构算法不用多说了，楼主建议从准备面试开始，一天刷一到两道算法题。

不用选择太难的题目，但是经典的排序、查找算法，基本的数据结构比如二叉树、链表、堆栈，这种一定得会，否则写不出来就回家。。。

另外，建议大家去看看JDK的底层源码，比如集合包、并发包的源码。看的时候一定要边**看边总结边画图**，这样最后记在你脑子里的，是一幅幅的图片。

如果光看不画图的话，除非你是天才，否则一定很快就忘了！楼主自身的血泪教训。。。

总之，如果能做到上述几点：掌握经典数据结构算法题目，并且可以在面试现场，跟面试官画图聊聊JDK底层源码的话，一面必过。

**（2）二面：项目经验**

二面面试官一般是你未来团队leader，一般会结合项目来进行考察。举个例子，下面就是一个比较典型的**项目连环炮**：

- 你说你项目用到了xx技术，OK，那你说下具体使用场景？
- 为什么你要这么使用？
- 这么使用的好处和坏处？
- 在用的过程中有遇到什么问题吗？怎么解决的？
- 解决之后是否对里面的原理深入了解？

一般二面就会从项目各个细节入手，考察各种技术在项目里是如何运用的，并且技术是如何结合业务来落地的。

然后有的面试官会继续深挖，看看你对自己项目中用到的技术，掌握的是否足够深入。

所以除了结合项目把某个技术说清楚外，最好对这个技术有一定的深度。

举个例子，如果项目里用到了微服务相关的东西，那么如果你去看过Spring cloud相关的源码，比如Eureka、Ribbon、Feign这些组件源码，那么面试会很加分。

楼主在面试最后拿到offer的那个互联网公司时，就提到了自己项目中用到了微服务，并且由此去看了注册中心Eureka的源码。

然后从源码层面，详细画图阐述了其内部的心跳机制、多级缓存机制等等，甚至给面试官指出了Eureka中存在的一些bug，那一轮面试楼主印象很深刻，和面试官聊的非常开心。

### 二本跨越山海，程序员柯南

在年底，我利用我学会的安卓开发技能开发了一款Vip视频破解App：聚视助手。这款软件至今还在维护，它是一款收费软件，软件可以免费观看爱奇艺、优酷、腾讯、乐视、PPTV、芒果的VIP视频。原理很简单，调用网上已有的破解接口，并嵌入腾讯X5浏览器内核。关于收费模块，貌似我那时候支付宝还不支持个人开发者，于是想到了卖卡平台。用户去第三方买卡，到我的软件输入卡密即可使用。不过推广不利，并没有赚多少钱。

03

在反思中进步

​    转眼，2018到来。

​    我还是那个两眼不闻窗外事、一心只想敲代码的我。年后，接了个学校的项目，这时候正好我的技能栈已经扩充到Spring生态圈了，Spring Boot、Spring MVC用的贼溜。正好，基于Spring Boot仿实习僧做了个招聘系统，酬金税后2000。

​    技能栈越来越多，我开始思考更深层次的意义。

​    我的基础到低扎实不扎实，每次想到这，我好慌。

​    我的基础仿佛没有，我既没有研究过jdk源码，又没有搞过算法竞赛。我开始主动寻求Java中的基础，去寻找我经常听到却不会的。我问我的学长们，听学长们讲述面经。这时候，一系列我不知晓的名词涌来，让我仿佛觉得自己是个摇摇欲坠的大厦。

​    多线程，什么是多线程？什么是线程安全？我一点不懂。JVM？这是啥，GC又是是什么？BIO、NIO、AIO，抱歉，我不会。

​    我觉得我要开始改变了。内心仿佛总是有一股力量在揪着我，催着我，让我去做，去行动。我觉得，我不能再看视频学习了，慕课网已经不适合我了。我要去看书。

​     在我的印象中，我主动看的第一本书，是葛一鸣的《Java程序性能优化》。我非常感谢这本书，感动到想哭着给作者打赏。这本书完全打开了我对Java未知领域的大门，是它，让我知道Java基础中String的底层原理、List、Map的底层原理与优化，是它，让我知道了设计模式这种东西，是它，让我知道了GC、JVM，让我知道了Java世界中最重要的多线程相关知识，让我体验了Java性能调优。这本书中的内容，基础知识我看的懂，JVM、多线程等看不懂，但为我指引了方向。按着这个方向，我买了《深入理解Java虚拟机》《Java多线程编程核心技术》《Java并发编程的艺术》，我读的如饥似渴，书上的示例我都照着敲一遍，可我担心学得快忘得快，于是我开始记笔记，我把书上的内容都抄了下来，发布在了我的博客上。学完多线程相关的知识，我再回来过看葛一鸣的书，我懂了。

04

再战软件大赛

​    2018暑假，非常热闹。

​    这次我的团队很给力，指导老师也很给力。我们一起开会讨论做比赛！没错，还是山东省大学生软件设计大赛。这次，我想全力以赴。

​    我们用了一个多月去寻找我们究竟要做什么？我的导师特别想做一个医生机器人，还给我们看了相关的图片。我们的课题是大数据分析与挖掘。起初，我们压根没有头绪，走了非常非常多的弯路，怎么说呢。我去学了Hadoop，学完后发现项目规模太小，用不上。然后去学了Elasticsearch。最初的作品是一个网页对话窗口，集成思必驰语音合成接口，后端是Elasticsearch做的查询接口。非常简单（low）。

​    了解到其它队伍大都是做了做数据爬取、分析，然后用ECharts做可视化展示，我的导师建议我做知识图谱，并提供了示例。于是，我去百度调研，用了一周的时间学习了Neo4j，并结合Spring Boot做了个Demo。只有图数据库的支持是不够的，还需要前端展示，于是学了d3.js。但我的前端技能并不是特别好，数据量太大，做出的知识图谱节点都挤在了一起，作品效果非常不好看。

​    那段时期，我又陷入了迷茫。我究竟要做什么？第一次参赛一败涂地，这一次，我还要继续失败吗？

​    导师告诉我，让我多试几个网站爬取数据源。无意中，我看到了jb39网站的自助诊断系统，瞬间惊呆了，这就是我要做的东西！

​    导师要做知识图谱，可我要坚持做智能医疗诊断系统。在思考系统的算法逻辑时，我惊奇的发现，支撑诊断算法的正是知识图谱。当我在办公室里的小黑板手写算法思路，向队友、导师展示的时候，我那时非常开心，因为我终于知道了我要做什么。

​    大二下学期开学后，我被通知作品进了二等奖，一等奖决赛即将在山东大学举办，让我务必准时参加决赛答辩。

​    答辩我准备的非常充分，而且，在决赛答辩之前，我就在另一个省级比赛中答辩过一次了，算是涨了一波经验。

​    不负所望，我的作品获得山东省大学生软件大赛一等奖。 





 	

###  我的秋招，全靠美貌与运气

 	我第一个完整走完面试流程的公司是OPPO。7.19号宣讲会现场投简历，傍晚就收到面试通知，第二天一站式三面流程走完，没有拿到Offer。 

 	


 	大疆也在七月开始了，几乎是别家在提前批，他已经是正式秋招了。我报的是上海岗。不知道是名额太少了，还是我太菜了，面试时感觉评价还挺好，聊了50多分钟，面试官算是笑嘻嘻地把我挂掉了。 

 	


 	之后好像每一天都在投简历，准备笔试，准备面试，背一些以前根本不知道的知识点（菜，没有在实战中积累）。 

 	


 	8月的时候，上海华为优招面试。我的一面和二面隔了相当长的时间，一面二十分钟讲了些项目和深度学习的知识，二面综合面像是HR面，是个女主管，连我男朋友在哪个公司上班都问了…过了一周，收到华为的资源池短信，就…虽然也不是正式的吧，但感觉心里像是有个托底的似的，但又不能完全放下心来。 

 	


 	华为面完的第二天，收到了依图的AI专场的面试邀约，依图面试嘛就是算法题写到吐，数据结构渣的我是一轮就被刷了，8个月没有回家的我在收拾行李的时候收到携程提前批的面试时间段选择，我因为依图的面试已经改签了一次车票，实在太想回家的我，拒绝了这次提前批面试… 

 	


 	投的银行的简历开始有动静了，暑假在家里呆了一周就收到了交通银行8月28的面试通知，这也是我唯一一个去面试的银行，后续通过笔试的也都推掉了。这次交行也算是提前批，没有通常银行的群面，技术面也没有问更多地技术问题，一排面试官围着问为什么选了这个专业没有去研究所，为什么喜欢金融研究生没有读金融。我也就面了十分钟吧，最后结果当然是gg啦。真心觉得跟这类有点气场不和，他们选技术岗更喜欢计算机和电子类专业。 

 	


 	9月13听了平安科技的宣讲会，我这种装逼怪没发朋友圈集赞，少了机械键盘。嘤嘤嘤。9月17号赶去宝山超远的一所学校做了一场上交所超级尴尬的笔试，看来开发我也转不成了。晚上做了平安科技的笔试，交卷一小时后就收到面试通知，笔试可能就是个过场吧。 

 	


 	银联提前批笔试的时候我在飞机上，没做笔试，参加了正式批拿到了面试资格。然而群面就凉了，大场面老子真是hold不住啊。 

 	


 	银联凉了之后，浑浑噩噩坐了一站地铁，不知道是回去面上海电气呢还是回去睡个觉。在学校参加了上海电气这个国企的宣讲会，之前在网上投了简历，宣讲会第二天就有场集中面试。想想还是算了，一站下来后又坐回来，到一个商圈想着吃个午饭吧。早饭都没有吃，还有心情搜了哈灵面馆，不过终究还是放弃了。随便找了个地铁下面的餐厅，吃了超贵的一碗黄鱼面，想找个地方休息一会儿都找不到。在汉堡王外面的小桌子闭了会眼。对面是个通向广场的天桥，外面很多人吸烟，真的是不容易啊，每个人都不容易。最后找了一家甜点店买了超贵的咖啡和甜甜圈，坐下填平安科技面试的信息表，旁边一堆搞金融的男男女女，好像是要集体换工作，又说起一个人简历造假，根本查不到以前的公司，感慨一句大家都是求职狗诶。进地铁想不安检了被扯着书包带拽住拽回来，哎。好了我知道错了。这简直就是最悲惨的一天。 

 	


 	平安科技面试选了较晚的面试时间点，六点半终于轮到我面试，面试完的时候，面试官说，如果通过晚上会有通知，明天还要麻烦你再跑一趟。真想接一句，不麻烦我愿意。走回地铁站的路上，繁华的陆家嘴也有散着灯光的小店，如果每天九点下班，会错过太多美好吧。 

 	


 	第二天就是平安科技的二面，问了很多基本问题都回答得不好。面试官解围说，我已经好多年不做技术了，昨天的技术面试官已经评价过了，既然通过了那就没问题吧。接着问我怎么看待瑞士碰瓷男的事情，还好我是微博重度用户，热点全知道，胡扯能力还是有的。面试结束我问面试官对我有什么建议，面试官说我觉得跟你聊的挺好，你问题回答得也都很有逻辑……行叭，出来我还一直担心是不是过不了然后问hr小哥哥我是不是没通过可以回去了？HR说，你等一下，前面还在面其他的人。平安的hr面好平易近人啊。“你在学习或生活中遇到的最大困难是什么”这个问题已经遇到过三次了。后来跟一起面的同学吃午饭，才知道原来二面不过的话是没有hr面的。 

 	


 	9月19号面完平安二面回来，美团一个面试官加我微信。我觉得自己明明都笔试挂了啊。硬生生用机器学习的项目面了数据挖掘岗，没想到面试官还说让我看一下数据挖掘的知识，因为这次没有问，下次肯定会问的。我还在想会有下次？我电话面饿了么的时候十分钟一面就挂了。美团的hr也加了微信。问我最近什么时候有时间去现场面试。真的玄幻一面竟然过了。我考虑到下周的安排，说是27号吧，然后hr去协调面试官的时间。一会儿跟我说，面试官下周要去成都秋招，所以不在上海，如果明天或者下周二我不去面的话，只能给我弄到十一之后了。我一想不行啊。那时候肯定机会更渺茫了，只好下周二吧。然后我特别怂，当时觉得什么都不会，不敢去，转头去面大众了。大众汽车和通用汽车我投的自动驾驶岗，好像竞争是真的很大的，所以我是面试挂了。 

 	


 	9月17晚上接到海康的电话简历评估面，海康也是神奇，我的简历投了两个月都像是石沉大海一样，还是内推的。18号晚上海康的hr打电话跟我说简历筛选面过了，让我周四或周五去张江现场面试。我一想今天的平安结果还没有出来，万一座谈会怎么办，所以只好先约在了周五。然后就收到了电信IT研发中心周五面试的通知。 

 	


 	9月20号平安座谈会的时候，纽曼科技的hr给我打电话。问我有没有时间，然后我说先稍等一会儿吧，结果一点钟的时候我又正在地铁上。后来回到实验室，又打过来了。没想到HR竟然问了几个简单的C++问题。然后说觉得我掌握的还不错，问我下周晚上有时有没有哪个时间来进行一次电话面试。（这个最终鸽掉了） 

 	


 	拿了平安的offer之后真的是膨胀了。因为下雨不想早起同时鸽了上海电信it研发的面试，还有海康威视的现场笔面试。爱奇艺hr打电话说邀请openday，现场面试，有交通补贴。但晚上又收到intel现场笔试通知，所以爱奇艺的open day邀请也要鸽了……由于某种原因我也不想去爱奇艺。 

 	


 	远景能源的电话面试官问现在有没有时间进行一下电话面试，我说现在没有，他问什么时候有，我说今天都没时间，下周行吗？他说，下周我要出差了。我说那就算了吧。牛逼哦。 

 	


 	做着拼多多笔试题，Timbition的hr说，我们在东华大学有宣讲会，收到了你的简历，会现场面试，我不记得是什么岗位，好像是之前怕没工作随便投的测试，直接说，不好意思，没有时间，太远了。 

 	


 	9月29的时候上午去现场农行笔试，笔试完在中山公园一家KFC坐着复习了两个小时算法题，五点多才面完了携程，没有写算法题，一直在扣项目的细节，问了深度学习的基本问题，跟小姐姐聊得还挺开心。

提前批真的很重要啊，我的美团、携程估计被捞起来可能是我提前批就报了的，但是没去面。而我一个实验室的同学就没有过。

### 三年努力，梦归阿里

集合、线程、volatile、锁、网络IO等这些，不要停留到网上博客的那种表面程度。必须要深入到源码级别，这样才能突出，跟其他候选人拉开差距。

5、数据库的各种机制ACID、事物隔离级别以及原理、索引原理、常见分库分表姿势等

6、JVM里的各种东西分代、回收算法、垃圾回收器搭配和对比优劣、线上问题排查、类加载等等。这些东西，最低要求都要流畅的说出来，但是如果要和其他候选人拉开差距，还要突出亮点比如，我之前做过垃圾回收器的调优，从CMS换到G1。**我把CMS的分代、垃圾回收算法过程这些基本东西说完之后，然后说出CMS有**两大缺点**：一个是会产生内存碎片，另一个是会产生浮动垃圾。

然后就开始说为什么会产生这两大缺点？因为这两大缺点会怎么样？（导致RT升高）；然后换成G1之后有啥优点？

接着再把那些原理喷一遍，调优之后性能上有多少多少的提升，这在面试官心中档次一下就上来了，跟其他候选人拉开了差距

7、框架都要做到了然于胸吧，Spring最基本的IOC、AOP、Spring事务一定得看过吧。Mybatis、Tomcat常用的姿势要知道，Redis常见的部署方案、集群原理、持久化机制、5种数据类型对应的底层数据结构。Reactor模型运转机制、常见的缓存问题解决方案。Dubbo、ZooKeeper的使用姿势和基本原理要知道吧。如果你研究过这种RPC的源码，无论是Dubbo还是SpringCloud全家桶，那就更好了，直接说出来，碾压面试官，让面试官听你聊

8、分布式相关的问题。如果研究过大数据相关的框架那就更好了，**绝对的加分项**比如，我深入研究过Kafka的底层机制，面试蚂蚁的时候，直接就问我Kafka的底层：果让我来设计，如何保证消息零丢失。直接从三个可能丢消息的阶段说出如何设计来保证

还有分布式锁常见的方案要知道、分布式事务常用的方案都要研究过吧。

比如：面试蚂蚁的时候，就问我TCC的机制，直接说出使用姿势，使用场景，使用TCC的优缺点

### 好惨一男的

> 

湖南某双非本科，学的电气工程与自动化，今年四月初开始自学Java，七月份有幸去熊厂实习，所以从湖南来到了北京，实习的岗位是Java服务端开发，实习期间跟着开发项目，确实学到了很多之前自学学不到的东西，非常感激我的老大。但一边实习一边秋招对我来说的确有些力不从心，印象比较深的是下班之后躲在公司的楼梯间里做迅雷还是哪家的笔试，结果最后还是挂掉了。中秋节前还是选择跟老大申请离开了，加入了秋招大军的队伍。

   网申

从中秋开始到昨天，一共是投了337家公司(很多都是简历关都没过)，做的笔试+测评大概是88场，面了20场，投的都是Java后端开发岗，地点大部分都在北京，其实一开始我也没打算投这么多，只是因为简历经常被刷，作为一个菜鸡的疯狂自救的行为….

![img](https://app.yinxiang.com/shard/s13/res/eb14b9c2-ed74-478c-a9a8-fb460b9e3a8f/640.jpg)

毕竟我不是那种投一个就能中一个的大佬，另外很多公司的反馈并不会那么及时，如果只投四五个大厂，十几天之后发现连笔试机会都没给……这个时候中厂的网申都截止了、小厂也招满人了，那就更难受了，所以我在国庆假期那段时间，看着有还行的公司，就去投一下……刷题刷累了，就去找找秋招信息投一下……说到秋招信息，我的来源渠道主要是这几个，方便大家参考：

   1.牛客网的求职区

- 求职专栏里基本都是比较好的互联网公司，而且不会把失效的招聘信息挂在上面;
- 在讨论区里不定期还会有一些内推信息，可以多关注关注，重要的是有很多面经;
- 不过要是看见标题带有"offer求比较"的文章，和我一样承受能力不强的老哥，建议慎点

   2.应届生求职网

- 虽然这个网站做的界面emmmm…值得令人探讨,但它里面的求职招聘信息确实很全，基本上发布了秋招信息的公司在这里都能搜到，
- 另外它有一个宣讲会的专区，可以按城市、按公司、按学校来搜，对于想跑宣讲会的小伙伴可以多关注关注

> 建议投递某个公司之后将对应的职位、工作地点都记下来，我是用的有道云笔记，还挺方便的，因为有可能投递很久之后才会收到一个电话或者邮件，这时你需要判断是你曾经海投过的某个公司或者只是个广告……还可以把宣讲安排、面试时间、笔试时间按日期分类记载下来，这样忽然一个约面试的电话打过来你可以协调到一个方便的时间。

   3.梧桐果

招聘信息也比较多，和应届生求职网类似

   4.拉勾

主要是互联网公司的招聘，特点是可以一键发送附件简历，比较方便，而且投递进度可以随时看到，反馈也比较快。

   5.猎聘、大街、智联招聘、前程无忧

- 有些公司会用这几个网站来招聘，有校招专栏，更多的是社招，虽然会有广告，但还是offer要紧，
- 注册了之后你就能在邮箱的订阅邮件里知道自己到底有多优秀(手动滑稽)，凌晨都能收到阿里巴巴HR想挖你的邮件

   6.一些微信公众号

我用的几个比较好的找校招的公众号有校招薪水、互联派、校招日历、互联镖局等等（[更多关于秋招准备、规划和信息收集介绍请看这篇文章](http://mp.weixin.qq.com/s?__biz=MzI3ODg2OTY1OQ==&mid=2247484410&idx=1&sn=5dde8b636d9592ae4c26fdd226db3b5b&chksm=eb51200edc26a91869c376a69bd0226088a9048f937489ccb0c00d2659e7944c5176c98d1de2&scene=21 wechat_redirect)）。另外，如果想大概了解一家公司的话，我是通过校招薪水+看准+职友集之类的网站去了解它的薪水、评价之类的。

   宣讲会

如果是还不错的公司而且有现场笔试的话，还是建议去参加宣讲会的，有些公司宣讲会之前会打电话或者邮件，有些需要自己去主动搜索信息，楼主租的房子在北航附近，所以附近的北航、北邮、清华、北林、北科都跑过，但其实也不算多，一共只跑了10家宣讲会，多跑跑总会有机会的，当然大佬可以忽略，大佬直接网申然后血虐笔试等面试吧……

**优点**

- 笔试一般都比线上笔试简单，而且简历都会附在试卷一起交上去，
- 至少不会出现网申或者邮箱投递简历直接被压在栈底的情况……

**缺点**

- 有些宣称会现场笔试的企业，其实到了宣讲结束之后还是给你一个笔试链接让你去做，
- 或者还有一种套路是现场笔试几个字写得特别大，右下角写着几个小小的字(运营岗现场笔试)

参不参加宣讲会大家自己权衡利弊，效果好的话可能周内就能拿offer，因为很多都是笔试第二天就约面试然后一套流程走完。当然，也会出现有些企业没hc了，纯粹抱着宣传不招人的目的，就算给现场笔试只是套路而已……楼主就碰过现场只有3人写Java开发试卷，题目也全写对了连面试机会都不给的公司(某爱网)……

强烈吐槽某399,就招那么几个后台开发还要全国巡演，约你4点去面试，二三十个人在会议室里等，是为了证明你们公司很火爆吗….结果等了一个半小时只面了10分钟，如果是因为面试太难了挂掉我没话说，关键是问的题目特别简单，全部都答上来了还是让你回去等通知，如果不诚心招人或者觉得简历不合适的话直接把简历或者笔试挂掉不就行了吗

![img](https://app.yinxiang.com/shard/s13/res/6e32dc5b-4bbf-4851-9a9f-7243f2daf927/640.jpg)

   反馈总结

**简历被刷的：**

> 网易有道、OPPO、瓜子、海康威视、点我达、陌陌、虎牙、欢聚时代、百词斩、金山、
> 苏宁、旷视、猫眼、京东、猿辅导、顺丰、携程、招银网络科技、新浪、华为、作业帮、
> 酷狗、小红书、bilibili、流利说、IBM、唯品会、keep、平安科技、thoughtworks、
> 美的、微众银行、金蝶、vivo、360、科大讯飞、凤凰网、一起作业、用友、斗鱼、BIGO、
> 完美世界、人人、蔚来汽车、拼多多、触宝、arinb、有赞、乐信、饿了么、微策略、
> 中国银联、依图科技、大华、一点资讯、大搜车、浪潮、酷家乐、马蜂窝、喜马拉雅、
> 网宿科技、广联达、招商银行信用卡中心、新华三、汽车之家、趣店、***、哈啰出行、
> 前程无忧、乐元素、自如、贝贝网、神州优车、小鹏汽车、趣头条、甲骨文、快看世界、
> 21CN、心动网络、蛋壳公寓、7k7k、美菜网、驴妈妈、百融金服、一下科技、要出发、
> 拍拍贷、众安保险……

  等多家企业，我哭了，你们呢。

![img](https://app.yinxiang.com/shard/s13/res/4c6c3bc7-f8d6-4b4a-8dda-0ce4d255de43/640.jpg)

(大家做Java后台想海投的找不到公司的可以在这里面找找啦)，其实我想说明的只是，**我被拒绝打击了这么多次，还是能继续打起精神去投下一家、去面下一家**，很多牛友比我要优秀的多了，暂时的0offer没什么大不了的，**丢掉自信才是最致命的**。我们还年轻，路还长着呢

   知识点

针对Java后台开发要准备的知识点，主要就是以下几个大类，**按重要程度排序**：

   1.算法和数据结构

> 这应该是最重要的了，也是准备面试和复习应该关注的大头，楼主是算法渣，
> 所以没什么值得借鉴的宝贵建议，多刷剑指offer和leetcode吧，在牛客网的题
> 库里在线编程就有，硬着头皮刷吧，想不出来就看看讨论区里的思路和实现，
> 看答案不丢脸，理解了就是你自己的。
> 剑指offer应对面试中的手撕代码，leetcode主要应对线上笔试。
> (链表，二叉树，BST，红黑树，几大排序算法得掌握)

   2.Java基础知识

> 建议可以看《Java程序员面试宝典》、李刚的《疯狂Java讲义》补一下基础的
> 知识点，未来有时间了可以研读《Effective Java》一些经典书籍，
> 关注HashMap等集合类(HashMap的get方法时间复杂度，为什么是O(1)，它的底层实现，
> 让你来手写一下get和put方法，它和HashTable有啥区别，为啥key主要是String和Integer，
> 怎么解决Hash冲突，什么时候扩容等等…)，

   3.JVM

> 重点关注垃圾回收(什么是垃圾回收，垃圾回收的算法，GC怎么给内存分区的？)、
> 虚拟机内存模型、类加载机制(哪几种classloader？双亲委派模型是什么，为什么要这样做)， 
> 虽然实际开发中不一定能用到，但面试确实可能会经常问到这几点，推荐《深入理解Java虚拟机》
> 80%的面试都会问HashMap，复习的时候死锤HashMap绝对不亏，
> 另外还要多看看多线程(sleep和wait的区别，线程间通信、怎么避免死锁、怎么开多个线程顺序执行任务。)
> 还要关注一下Java 8(J..J8?)的一些新特性，lambda、stream，即使现在JDK11都出了，JDK1.8的新特性还是要了解

   4.数据库

> 基本SQL语句要会写(CRUD，聚合函数、排序分组)，乐观锁、悲观锁，
> 数据库事务ACID是什么，数据库优化，
> 常用的存储引擎以及MyISAM和InnoDB的区别以及何时选用，索引原理，
> 关系型数据库从MySQL入手吧，推荐《深入浅出MySQL》，至于非关系型的，
> 学一学Redis，Redis的过期策略、常见的数据结构、持久化策略AOF,RDB等。

   5.操作系统

> Linux一些常用的命令…grep,tail,top,lsof,kill,cat之类的，
> 进程间通信的方式(这个一定多关注，被问了三四次了)，
> 查看进程的内存怎么看

   6.计算机网络

> HTTP1.1和2.0协议的区别、状态码、TCP连接的过程、TCP和UDP的区别、
> 输入一个网址之后客户端服务端之间发生了什么……推荐《图解HTTP》

   7.设计模式

> 单例、工厂是被问的最多的，需重点关注，包括懒汉饿汉双检锁，
> 偶尔可能会问你还了解其他的什么设计模式，可以了解一下另外几种较常见的
> 策略、门面、桥接、观察者模式，
> 推荐《大话设计模式》和设计模式的runoob菜鸟教程，可以看得很快

   8.框架

> 关注一下Spring的IOC、AOP原理，MVC框架的流程，其实框架只是一个封装好的用来方便开发的东西，
> 给不了解的人吹一吹可能看起来很牛x，其实反而是最容易上手的，
> 跟着官方文档写个demo就差不多了，校招最好还是多关注基础，不要死锤框架

   9.Git，Maven等一些项目管理工具，还有一些杂七杂八的REST规范等

> 虽然简历里写了，但面了这么多家问的其实不多，只有一家问过git pull 和git fetch的区别，
> 会的话更好，就算不会也没关系，时间少的话还是建议多抓前面几个知识大类恶补

   写在最后

> 我其实很少会写鸡汤，但还是想说一说，对于非科班同学来说，差的最多的就是时间和思维，除了应对本专业的课程之外，还得为了生计奔波自学，不过，**既然选择了后台开发这条路，能坚持走下去就走下去，当初选专业的时候我们已经错了一次，现在既然有了想要奋斗的目标，就不要因为害怕困难而再错一次**。
> 大二的时候如果能意识到自己想做什么工作是一件很幸运的事，大部分人其实在选择这一步就已经输了，我是大三下学期才意识到自己真正想做什么，确实有点太晚了，如果再早一些可能我会更从容，从今年4月开始自学Java，到7月拿到熊厂实习offer，再到最近拿到几家offer，其实没有那么顺利，熬夜刷视频刷题看书都只是对身体的考验，真正难挺过去的，是打消自己一次次想放弃的念头，这些天忙的时候白天三四个面试，晚上回来还要做测评笔试，跑了大半个北京，骑单车坐地铁去苏州街、望京、西二旗、静安中心、西单、环球金融中心…虽然秋招没有拿到超级大厂的offer，但这些天的经历对我来说已经是最宝贵的了。
> 献给未来的学弟学妹，以及还正在秋招路上和我一起奋斗的老哥们，共勉

### 程序员柯南



​    在做"智能医疗诊断系统"参加省软件大赛的同时，我深深感受到在爬取大量数据时的时间消耗是多么巨大。最长的时候，我的电脑两天没关机，一直在后台爬。最后，受不了的我，用Java写了一个多线程爬虫框架，并发布到了我的Github。

​    我以前都是一个人做项目，而且，越来越发现自己对页面相关的设计开发效率低下。现在有了团队，非常渴望前后端分离。当时，我一直在用模板引擎，基于服务拆分的思想，我做了一个类似Tomcat的静态web服务器发布到了我的Github。

​    在学完《深入理解Java虚拟机》后，我觉得我不应该学完就完了，我要把学的知识做成一个作品出来。当时学完了java性能监控的工具后，觉得软件形式的监控也比较麻烦，如果能有一个可视化的web版再结合ECharts图表展示就太方便了。我用了几天的时间做完了JavaMonitor项目的单机版，没想到后来star越来越多，吸取了一些建议，做了支持分布式监控的javaMonitorPlus。

​    也是在暑假这段时期，我收到了来自一位阿里技术专家的邮件。内容简单概括就是想不想来阿里。当时收到邮件的意义，对我来说非常巨大，他让我第一次感受到BAT与自己的距离似乎不是那么遥远，我一个普通本科仿佛也可以实现去BAT工作的梦想。

06

人生的转折点

​    2018年12月，我迎来了我人生的第一个转折点。

​    当时，我已经感受到了技术仿佛到了一个瓶颈，单机架构我做的很溜，但涉及企业的分布式架构，我还是不太了解。当时恰好得知省赛颁奖典礼有现场招聘会时，我便精心准备了一份简历，并彩印了5份，打算投递。可到了现场，看到的都是小公司在招软件销售人员，我就瞬间奔溃了，我心底一直有一种骄傲，我可以去大公司的，我有这能力。最终，我一份简历没投。

​    看着写了好几页的简历，我是真的不想就这么白白浪费。

​    想起来我大一曾注册过的几家招聘网站，我就把我的简历发在了上面。其实只有一家，实习僧。

​    我以为压根没有我的岗位，因为我太小了，我才大二。可我打开实习僧，却发现竟然有2020届的实习生招聘，我有点惊讶。不过，也仅此而已，我不认为我有能力能进新浪、百度、京东这些大公司。我记得我当时抱着不浪费我写的这么多页的简历的心态，只投大公司，小公司不投。然后，洗洗睡了，压根没怎么放心上。

​    不久的一天早上，我还在睡觉，接听到了第一个电话，来自中国电信北研院，问我在京吗？什么时候有时间，约一下电话面试。然后，自己开心的不得了。又不久，京东打来了电话，让我去北京参加现场面试。我推到了我的期末考试结束后。又不久，新浪也发了现场面试的邮件。

​    一天晚上，我收到了百度打来的面试邀请电话，当时我在商业街买吃的。听到了开心的不得了，约定了一小时后电话面试。东西也不买了，直接回学校，看了一会书，复习复习，因为那时候我已经半个月没碰过代码了，《剑指Offer》才刷了几章就停下来一直在复习期末考试。庆幸自己买了本《Java程序员面试笔试宝典》。百度一面，如约而至。我记得我当时说的最多的就两句话：忘了，不了解。面完后，我觉得我挂了。但我的习惯还是让我把面试官问到的所有基础知识都看了一遍。就这样，我第二天接到了网易一面的电话，回答的算是very good，就一个SQL左连接查询我忘了，因为我忘了复习SQL了。

​    意外惊喜，接到了百度二面的面试邀约，我这次提前看了很多知识，复习了Java虚拟机，多线程相关的知识，二面这块的基础知识娓娓道来，但谁知，面试官问我Redis底层原理，如何设置过期时间，我说不会，面试官便引导我说：“不会没事，我提醒下你”，就这样，我回答出了这块的内容。又问我消息队列，我又懵逼了，问我，如何设计秒杀系统，我说可以用队列，队列满了就直接false。面试官又问，分布式系统呢？那当然用MQ中间件。说实话，面试后，我对百度拜服。不久，网易二面来了，回答也算是very good！



## 面试技巧

### 答题思路

如面试官问你：你们分布式事务怎么做的？

那么，你可以按照这样的思路回答：

1. 在项目中某场景使用到了分布式事务
2. 为什么要用分布式事务？
3. 怎么使用的分布式事务？
4. 在使用过程中遇到了什么问题，然后怎么解决的？
5. 如果看过源码，讲讲分布式事务框架的源码和实现思想

### 嗅探机制

**可能有的朋友会问，怎么引导面试官到我们最擅长的技术上去？我个人建议****

我举个例子，如果你研究过Spring Cloud注册中心Eureka的源码，假如问你CAP理论，你说了一堆。。。然后你可以尝试着问问面试官：eureka是类似于AP思想，我可以大概给你画个原理图吗？

你去询问，如果面试官同意了，这个时候你要简单的画，不要太复杂

如果面试官对这个感兴趣，他会继续问你的（我们就等着他问的，对不）。

为什么这么说呢？因为不同的面试官倾向点不同。

有的认为，我问你什么，你直接说主题就好（要在单位时间内问更多问题）

如果你说的多啦，有的面试官可能认为你的表达或者理解能力有问题，你说的不是重点。

所以这就是我说的你先去嗅探，看看面试官是偏向哪方面的。

这就好比一场重要的NBA季后赛，刚开场的时候，双方球员都会用不同强度的防守动作，试探一下这个夜晚裁判的判罚尺度，好为后面做打算。这个类比，感觉蛮贴切，ps：NBA铁杆球迷 ^_^

### 笔试是玄学

能内推就不要走官网，能免笔试免笔试，不是说笔试难度大还是咋地，这玩意其实是玄学，因为你说你一个人做呢没问题，大神嘛无所谓但是你保不齐别人是一个实验室或者一个班级的人在做，如果遇到点坑的题目，你交代了，别人合作做出来了那你被挂能怪谁呢。还有就是如果大家也是合作做题的话，oj的查重或者作弊系统的判别现在越来越严，如果保不齐你被抓到了，可能就被企业拉黑，然后你还不知道，后面怎么投都没面试机会这是最惨的。还有就是大家都是一起做的，然后分数也差不多，但是别人接到了面试而你没有，我就遇到了这样的情况，就很玄学我都怀疑是随机选的人面试。反正就是笔试有风险，大家还是抱紧学长学姐的大腿，能走内推就内推。但是内推之前还是需要能够了解一下这个部门，大概是做什么的，hc的数量以及技术氛围，这点其实很重要，因为一旦进了流程，你反悔就来不及了，如果过了之后还想换部门那只能重新面试，再走一遍别说多恶心了。其实哪个部门最好或者哪个部门最有前景啥的这些问题，真的很难了解的非常清楚，我就纠结过很久很久，这种事情找不到最优解的，不过还好对我而言现在只是实习。

您认为我可以在哪方面提升自己

这个我可能一讲就讲半小时，您想把问题细化一下吗

技术热情



## 比较精彩的答题思路

### 多线程

**Java 多线程知识基础:**

1. 什么是线程和进程?
2. 请简要描述线程与进程的关系,区别及优缺点？
3. 说说并发与并行的区别?
4. 为什么要使用多线程呢?
5. 使用多线程可能带来什么问题?
6. 说说线程的生命周期和状态?
7. 什么是上下文切换?
8. 什么是线程死锁?如何避免死锁?
9. 说说 sleep() 方法和 wait() 方法区别和共同点?
10. 为什么我们调用 start() 方法时会执行 run() 方法，为什么我们不能直接调用 run() 方法？

**Java 多线程知识进阶：**

1. synchronized 关键字:①说一说自己对于 synchronized 关键字的了解；②说说自己是怎么使用 synchronized 关键字，在项目中用到了吗;③讲一下 synchronized 关键字的底层原理；④说说 JDK1.6 之后的 synchronized 关键字底层做了哪些优化，可以详细介绍一下这些优化吗；⑤谈谈 synchronized 和 ReentrantLock 的区别。
2. volatile 关键字： ①讲一下 Java 内存模型；②说说 synchronized 关键字和 volatile 关键字的区别。
3. ThreadLocal：①简介；② 原理；③ 内存泄露问题。
4. 线程池：①为什么要用线程池？；②实现 Runnable 接口和 Callable 接口的区别；③ 执行 execute() 方法和 submit() 方法的区别是什么呢？；④ 如何创建线程池。
5. Atomic 原子类: ①介绍一下 Atomic 原子类；② JUC 包中的原子类是哪 4 类?；③ 讲讲 AtomicInteger 的使用；④ 能不能给我简单介绍一下 AtomicInteger 类的原理。
6. AQS ：①简介；②原理；③ AQS 常用组件。

### 答题思路

**① jvm类加载机制，何时触发类的加载和卸载**

主要说了Java为了实现语言的灵活性，采用了在运行时动态加载字节码，以及加载、连接、初始化的各个步骤流程。

还说了加载使用的双亲委派模型以及其打破该模型的案例，各个类加载器加载什么样的类，如何自定义类加载器。

对类的七种主动使用触发类的加载，类的卸载的条件。

**总结起来：**主要就是围绕类加载，聊了一些老生常谈的问题。面试官肯定是知道，但是答的时候，要尽可能的**多说多扩展**。

这样可以让面试官知道我们大致的知识范围，也掌握面试主动性。

**② gc算法**

说gc算法之前，先聊了如何判断一个对象可以被回收，我说了引用计数法，GC Root等方式，回收对象的流程。

然后先从标记清除算法开始谈，说出其优缺点，从而引申出复制清除和标记整理算法。各个算法聊完之后，引申出分代清除算法。

聊完算法便开始聊各种垃圾收集器的特点和使用场景。

这里我的一点感受是：**很多知识点其实不是死记硬背的，而是前人设计的智慧或者是妥协。**

**我们可以按逻辑分析的方式跟面试官侃侃而谈，用分析问题的方式来回答，而不是死背答案的方式。**

**③ nio，aio，netty**

这方面其实不太熟，直接跟面试官表明对这方面有欠缺，但是有一定自己的了解。

主要从传统的bio模型开始说起，然后说到tomcat在bio模型下同步阻塞的问题。

接着说了为什么要设计nio这同步无阻塞的模型，是怎么通过一个selector多路复用来监控多个channel的。

最后还聊了聊aio的异步无阻塞模型的大致概念，nio基于事件的同步无阻塞模型适用于服务器端编程，aio异步无阻塞适用于大文件读取。

这里给大家分享的一点心得就是，不熟悉的知识点千万不要乱掰，浪费面试官时间，也让自己在面试中处于被动形势。

可以先表明自己对该知识点有欠缺，再大致说说自己的了解，让面试官快速了解自己的水平。

**④ innodb的索引结构**

直接和面试官说了innodb的BTree索引的B+树，说说其存储结构和优点。再聊到了聚集索引和辅助索引。

后来补充了下二叉查找树，链表，hash，B树的优劣势以及为什么会选择用B+树来作为索引结构。

尽量多从自己作为设计者的角度来回答问题，表现出分析和表述能力。

**⑤ 一致性hash**

- 先聊hash算法的优点

- 再聊一致性hash的使用场景：

- - 分布式环境下多节点负载数据
  - 防止节点的动态增减影响到大范围的数据

- 再聊一致性hash的原理，如何实现，自己实现该算法的思路

- 再聊其他中间件对其的实现，如redis-cluster的hash slot方式

**⑥ redis的持久化、哨兵、cluster**

这些都是老生常谈的问题，基本上你只要看过**石杉老师的亿级流量课程**，都可以轻松的回答。

**⑦ synchronized的原理**

先聊了sync的指令，再说其加锁的原理。

然后聊到了JDK 1.6对其的优化（自旋锁，自适应自旋，偏向锁等），然后说到了sync和wait、notify这对黄金搭档。

**⑧ AQS、CAS、以及其他组件**

说完sync，面试官就问了JDK的可重入锁，问其实现原理。

自然然的就说到了AQS，以及可重入锁的那一套原理，然后顺理成章的聊了公平锁，非公平锁。

接着面试官就问了使用AQS的其他组件，然后就聊了读写锁，信号量，CountDownLatch、ThreadPoolExecutor等的原理。

**⑨让你实现一个RPC框架该如何设计**

- 通讯协议

- 序列化方式

- SPI扩展

- 底层代理

- 超时、重试、负载均衡

- 拦截器、插件等自定义支持

- 注册中心的选型与交互

这类开放式问题按照我个人的理解，应该不是让我们直接回答底层很详细的细节，而是从很hign level的级别来谈谈需要考虑哪些点。

**⑩ 设计秒杀系统**

我本身没做过秒杀系统，之前也没怎么看过相关的设计，只记得之前上班通勤的时候偶尔翻过几篇博文，于是带着自己的分析跟面试官谈的。

- 临时机器、带宽申请，环境隔离，不要影响主体业务

- 与产品沟通，前端限流方式是否影响用户体验（如答题、拼图等）

- 预估用户量：比如只有40%的用户能抢到，那么直接让50%的用户立即秒杀失败，不进入后续服务

- 后端做好流量控制，限流降级，一些非核心的数据做好多级缓存

- 层级过滤下的少量用户，进入秒杀核心逻辑，这时候有多种方式：

- - 使用队列（削峰，串行化，扛并发）
  - redis的incr（单线程）
  - 分布式锁（可以聊聊分段加锁，增大分布式锁的TPS）

- 再聊聊产品需求设计，是采用下单即锁定库存还是支付才锁定库存

- **①分布式事务**

  跟面试官聊了分布式事务的各种解决方案以及适用场景，大致聊了下具体的细节。

  **②分布式锁**

  很多人聊分布式锁喜欢单刀直入的直接聊redis和zk锁，我喜欢先聊分布式锁的原理。

  其实就是在分布式系统中，找一个全局唯一的第三方的一个标识，某个节点的某个线程，获取到该标识，即为获取到分布式。

  相应的方案有很多：

  - 基于某个远程本地文件锁（只有某个线程能唯一创建一个文件）

  - 基于数据库某张表的唯一索引

  - 基于Redis的setnx/lua实现

  - 基于zk的瞬时序列节点实现

  再一个个聊他们的优缺点以及自己是如何在项目中封装落地的。

  **③限流算法**

  - 单节点限流：简单的聊了下漏斗和令牌桶算法以及他们的特性

  - 集群限流：想了想用Redis做信号量

  顺便聊了下Hystrix的信号量以及线程池限流。

  **⑤ RabbitMQ**

  因为项目用的是RabbitMQ，所以主要聊的是他的使用场景，如何保证消息尽可能不丢失，RabbitMQ的集群模式。都是很基础的问题。

  **⑥手写ArrayList**

  这个没什么好说的，相信看过相关源码都能写出来。

  **⑦不使用链表怎么让HashMap有序**

  问问题的时候，二面面试官边面试还在边拿着本子修复线上bug（看起来来的不是时候...）

  当时考虑时间很短，没有什么好的想法。

  于是说HashMap为什么插入读取是无序的，因为其为了快速查找定位的hash算法，导致其在数组中散列。

  如果不使用链表记录顺序的话，可能就想着有个有序的队列之类的来记录索引，从而遍历。

  答完之后，个人感觉答得不好，不过也过了。

### 地哥的腾讯面经

提前批笔试

腾讯提前批的面试应该是一个月前就开始的，我第一个投的公司就是腾讯了，人生的第一次笔试和面试也献给了腾讯。先说下笔试吧，笔试是 5 道编程题，个人觉得，腾讯的笔试题比较简单吧，也就是说，获得腾讯的面试机会应该算是不难的吧，5 道我好像是做出了 3道 + 一道90%测试用例通过 + 一道也是百分之几十来着的，忘了。

最后的结论就是，个人感觉腾讯笔试不怎么难，投了之后获得面试的机会应该非常大，我的简历背景是没有任何亮点的，没有啥比赛，没拿过啥奖，非211/985，普普通通。这里建议秋招有兴趣的一定要投一下，万一面试也过了呢，好像我听说腾讯技术研发是 2轮技术 + 一轮HR面，万一2轮技术面过了拿offer机会还是挺大。

当然，我听说前端的 HR 面是综合面，听说比比前面的两轮还难还难过。

提前批一面

一面是视频面，人生第一次面试，可以说我是很紧张的，一面我完全就是个小白啥套路也不懂，面试官问啥我答啥，完全不会引导，面试完后我感觉自己是真的傻，主要是问了一下问题：

1、浏览器输入一个地址回车之后都发生了啥？

这个可以说是非常高频的面试题了，我觉得自己这方面还可以，压抑自己的紧张，好好详细秀一波，然而，由于我事先并没有去准备过这个问题，而这个问题又涉及到很多步骤，所以我在逻辑上讲非非常非常不好，卡住了好几下，最后不管三七二十一，就说关键词了：有DNS转换啊，ip网络寻址啊，三次挥手啊，可能还有NAT地址转换啊，还有ARP啊。

可能平时看我文章的人会发现，我是喜欢把这些技术一点点推出来，有逻辑着连起来的，这样说出来会特别舒服，不过我这次面试的时候，连不起来的，归根到底就是，**没有准备**，头脑觉得自己都懂，但是不意味着讲的出来，所以我在这里是建议各位，对于那些高频的面试题，自己最后尝试着口头去表述一下，或者文字书写一下，要是你来回答，你会怎么说？

2、TCP 和 UTP 有什么区别？

我在回答这道题的时候，也是非常简单着回答他们的区别，例如一个面向连接一个非面向连接，一个可靠一个非可靠，非常简单就答完的。

不过这道题是一个高频题目，按上面的那个回答，就算回答出来，我觉得也是一点优势都没有。因为这些简单的区别，99%的人都懂，我觉得我们应该再往深入回答，例如TCP有流量控制，拥塞控制，面向流以及基于这些区别，他们的使用场景等等。

不过我并没有回答，不是我不知道，而是我想假装不说，等着他来问，因为我听说面试官都会一直往深问到你不会为止，然而现实是他并没有问，换话题了。感觉自己错过了一些表现的机会。

**这里我想说的就是**：如果你知道，你可以多说一点，千万别像我这么傻，等着别人来问。

3、写个快速排序

和算法有关的，我觉得自己还好，写的虽然不是特别快，但感觉自己写的还好，无论是从代码的排版（因为这个一般都是在笔记本写的，不可能给你IDE），以及代码的简便程度，我觉得都不错，这里我想说的就是，自己平时写代码的时候，一定要注意排版，别老是依靠IDE给你一键排版。

虽然我已经写出来了，不过他之后让我说下快速排序的步骤，我老实说了，不过我觉得，这些题都太简单，如果面试官的很基础，你也答的很基础，我觉得没啥优势，对于快速排序，我本来想补充的，例如对**中轴**的选择问题，与其他排序算法的一些比较，应用场景等，不过，我是想着等他来问我……

按照我这样写文章的话，估计得上万字，我下面简便说下就行了。如果你们感兴趣我这么啰嗦的话，下次我再来吐槽说说我回答的不够好的地方。

4、一条SQL执行的很慢的原因？（之前写过文章，建议看看）

5、MySQL有哪些存储引擎以及他们之间的区别（我其他引擎忘了名字叫啥）

6、如何查看SQL语句的执行状态，知道这条命令吗？（我当时MySQL其实几乎没学，很多都不知道）

7、qq用的是tcp还是udp（两种都有涉及）

8、说说jvm内存模型（其实并没有JVM内存模型，只有Java内存模型以及JVM内存结构，你要问清楚是哪个再答，我当时是答了Java内存模型，面试官一面懵逼）

9、JVM内存结构中有栈堆等，为啥要用栈这种数据结构？（主要是操作简便，快速）

10、说说垃圾回收？（老年代，新生代，永生代的区别等，各自使用的回收算法，新生代又分eden和survivor区等）

11、说说aop和ioc

12、大致看过哪些书？有逛技术论坛的习惯吗？说几个你常见的技术博客平台？有去逛过国外的技术博客吗？看的懂文档吗？

总体上一面比较简单，面试官没有深入问，不过问的很广，这里问一些，那里问一下。感觉自己答的还好，也顺利过了。第一次面试收获还是挺大。

1、对于懂的一定要多说，可以延伸，只要面试官不打断你的回答。

2、对于高频面试题，一定要自己模拟说一下，而且这些题一般不难，一定要多延伸，不然没啥优势。

3、感觉以后面试不那么紧张了，也就这么回事。

提前提二面

几天后收到复试通知，二面是电话面，二面操作系统和Linux问的有点多，我二面感觉自己就挂在Linux上，我Linux不大懂，被问了好几个个基础的问题都不懂，自己也是醉了，感觉自己应该和面试官说一下我Linux还没学?。操作系统很多细节也忘了，说说二面的面试题吧。

1、说下四次挥手，什么时候会出现time_wait状态？（我扯了一下，面试结束后，发现自己弄错了，真想给自己一巴掌，主要是，其实我对三次握手和四次挥手没去准备过，虽然看过挺多文章，但是具体的没记住，凉凉）

2、红黑树知道吗？说说，为啥有了平衡树还需要红黑树？（平衡树太严格，插入很容易打破平衡，经常需要调整，而红黑树是一种折中方案……）

3、红黑树是如何保证查找效率不会太低下的？（我后面再写一篇关于红黑树，B+树，平衡树这些的文章吧，现在先给出这些遇到过的面试题）

4、红黑树在调整的时候，不是会用到左旋右旋吗？说说会不会出现无限左旋右旋的情况，如果不会，那最多旋转几次？

5、为什么索引能加快查找效率？

6、说说B+树是怎么分裂、合并的，知道具体步骤逻辑吗？

7、你项目用到redis，知道跳跃表吗？说说他是怎么实现的，查找时间复杂度？

数据结构这部分我觉得自己答的还行，几乎都答出来的，不过下面的Linux和操作系统有点惨，怪自己没准备，不过面试就是一个查漏补缺的过程吧。

8、Linux的proc目录有啥用？（忘了，，，，）

9、怎么查看端口的状态？（有条啥命令来着的，忘了）

10、怎么查看某个进程的状态？（也忘了，呵呵，，，，，）

我简历上是写着**熟悉Linux常用命令**，然而一个也没答出来，尴尬啊，其实我会用的是那些 ls, cp, mkdir, tar等常用命令，对于线程、网络相关的都不会，感觉危险了，这么基础的问题都不会。

11、说说什么是进程，进程包括哪些数据？进程切换的过程是怎么样的？

12、如果想要让多个线程执行到某个点，都达到之后再继续执行，可以用java的那些类来实现？（CountDownLatch和CyclicBarrier这两个）

13、什么是反射？反射有啥用？

14、说说垃圾回收，jvm是如何知道这个对象可以回收的？计数法有啥问题？如果我们想要指定某种垃圾回收算法，该怎么设置？

15说说aop（这个问的刁难了，我该说的都说），他说，那我也可以通过自己配置文件来实现这种切面啊，为啥就要用AOP呢？（他问的问题就相当于，我用servlet也能使用实现一个网站啊，为啥要用spring这些框架呢？我当时应该要吹一波spring中AOP带来的好处的，不过我没说，感觉自己应该吹一下的）

15、接着是问了我那个**高并发秒杀系统的项目**，说了里面的线程安全问题，然后我这个项目早忘光了，自己也没准备，代码我不是自己敲的，直接看视频的。自己没做过什么项目，就充当了，结果面试官问了一下线程的问题，我一直没get到点，搞的自己也好懵，最后才知道他说的是啥，不过项目这块答的也不好，主要自己也没动手弄过，又是去年快速看视频学的。

总体上，二面除了Linux答的非常非常不好，还有四次挥手说错了，线程包括哪些数据说的也不全之外，以及项目感觉有点被认为不是我做的之后，其它感觉还好。不过。一个多星期后，结果出来，挂了。

不过我也不意外，知道自己有很多需要补的，面试有时运气不好，可能连续问到好几个不好的，估计就得挂了，不过这没方法，最好的做法就是面试过后把自己不足的补上来。



常规网申一面

常规网申的笔试题中是**20道选择题+3道编程题**，过几天就收到面试通知了，有了前面两次之后的面试经验之后，也了解到腾讯是特别喜欢问**操作系统+计算机网络+Linux**的，于是我把这方面的高频面试题都好好准备了，Linux 进程等相关都准备了，操作系统也大致准备了，下面说说这次涉及到的面试题。

1、说说网络建立连接之后是怎么关闭的（其实就是四次挥手，我详细说了，之前写过文章）。如果出现大量time_wait 状态的连接是怎么回事？（我说了第四次挥手出现了丢包、超时等），假如不会出现丢包、超时等，网络非常流畅呢？（说了短连接导致的）那怎么解决？（我说了限制最大连接，用队列来缓冲），问我还有其他方法吗？（我不大知道，好像面试官不大满意我的回答。不过最好的做法应该是修改 time_wait 等待的最大之间，把时间改小一点）。

2、说说IO阻塞与非阻塞是什么？各自有啥好处？知道多路复用吗？了解过 select 吗？说说他与 epoll 的区别。

我知道的也不是很深入，就常规答法，他问啥就答啥。这里我要说一下，我觉得很多人可能**混淆了阻塞、非阻塞与异步、同步的概念**。我实话，我觉得自己已经理解了，结果我看了好几篇文章，发现自己反而不懂了，懵了，总觉得缺了点什么影响我对阻塞非阻塞与异步同步的理解，说实话，我看了大概有10篇文章，有80%我觉得都没有说清楚阻塞非阻塞与异步同步的本质区别。这会影响你对同步阻塞，同步非阻塞，异步阻塞，异步非阻塞的理解。有时间我再来写一篇文章说说他们的区别，相信看了你就一定懂了。

3、知道乐观锁吗？说说他们适合应用的情景。

4、说说自适应锁，与其他锁相比，他的优缺点，什么情况下你觉得可以用自适应锁？（之前写过几种锁的文章，不懂的建议看）

5、你平时开发是在Linux上开发的吗？（我靠，Linux上开发？？那不是得对Linux上很熟悉？我虽然准备了Linux面试相关，可是这Linux上开发压根没体验过啊，我马上怂了，马上说没有，并且还加了我对Linux不熟，这门课刚学没几天。之后他就不问了Linux了，然后接下来我就扎心了）

6、那你平时就是在windows下开发了，那如果你平时项目要上线，这个项目的性能突然很差，你是怎么定位问题的？（我靠，在下从来没有上线过项目，连用心写过项目都没有，这下完，我迟疑了一会），他补充说，例如你可以通过观察你电脑的**cup, 内存，IO 的指标**来进行行定位，可以分析下吗？（可以打开任务管理器来查看cup等的运行情况，然后…..其实我没有上线过项目，也没有这样的经历），他说没事，假如遇到这种情况你会怎么分析？（我下面说一下我是怎么扯的）

心想，扎心了，其实我不大知道究竟要分析啥，好吧不管三七二十一了，然后我开始扯了：

1、如果cup一直很高而其他地方内存，IO很低的话，那很有可能项目里面有某些东西在疯狂运行，但却没啥用，很有可能就是自己设计了乐观锁，但竞争的线程太多，导致一直做无用功。

2、如果磁盘操作很高，但cup很低，这是意味着项目一直在做IO操作，很有可能是SQL语句写的不好，导致扫描了大量的磁盘，然后我就针对SQL语句的问题开始扯了，例如没有用上索引啊，选错索引啊，扯了一大堆，哈哈。（心想，舒服，刚好写过sql语句执行的很慢的原因有哪些）。

7、说说进程与线程的区别？进程有哪些通信方式，（我说了共享内存，消息队列，管道，信号量，套接字，信号驱动），他问还有吗？（我说其他的不知道了），描述下这些具体的通信方式（我有些具体的给忘了，大致描述了几个）

8、说说快速排序的思想，删除单链表倒数第二个节点，你会怎么做？

9、了解MySQL事务吗？说说ACID是啥（我靠，我对事务的隔离理解还强，研究过隔离是如何实现的，然而，，，我突然短路，ACID的D忘了啥，就像你高中那会对一首古诗背的很熟，然后突然就忘了哪句，心里有点扎心），那你具体说说ACID是啥（原子性是，，，隔离性是，，，，一致性？？？？？，我靠，我觉得自己对这四大特性很理解，感觉看名字就知道是啥了，然后说到一致性的时候，我自己的心中产生了疑问，感觉自己并没有真正意义上理解了一致性，然后我没说出来）

心中那个苦，一致性都没说出来，其实我是可以说出来的，但是我总觉得缺了点什么，**就像你看了几篇文章觉得自己懂了，结果让你在看几篇文章，你感觉自己有点醒悟了，然后突然发现自己并没有真正意义上的懂**，我查了好多篇文章，呵呵，千篇一律，都不能解答我的疑惑，说实话，别觉得自己懂了，其实你根本就没有懂，最后是懵逼了好久，才觉得自己应该是懂了，有时间也要写一篇事务的四大特性的文章。

说实话，网上的很多文章，真的是千篇一律，当你产生了疑惑，很难找到解答，因为你会发现，这几篇说的都是一样的，那个你感觉**特别重要的疑惑**都没有说到。好吧，不吐槽了，等下要被大佬门怼我写的文章了。

一面大致说了这么多，有些忘了。比起提前批一面，我觉得自己在表述上好多了，也会扯了，这里我想跟大家说的就是，问题就那些，一定要搞懂，延伸，要理解，该背的要背，例如进程有哪些通信方式。如果要面试腾讯的时候，计算机网络、操作系统，Linux这些底层的，要学好，尽管你是面试 java 岗位的，可能他一个 Java 的问题都不问的。



想杀了自己的二面

二面我应该就是个傻逼吧，自己给自己挖坑了，最近这些题一直在刷题，复习基础，对于数据结构，算法题，Java，操作系统什么的，自己也想看看有哪些不足，然后他一开始就叫我介绍项目。

1、说说你做的项目。

其实这期间我为了应付以后的面试弄过做过一个项目，不过还没弄好。然后我之前不是说了自己有个很水的高并发秒杀系统项目吗？我自己也没啥项目经验，然后我觉得**高并发**也是很牛逼的样子，就打算用它了，简历上也写了。不过这个项目我自己没实操过，看视频的，很短，几个小时而已，用到了redis等，不过我已经准备了很多redis相关的知识了，怎么优化的也准备好了。

**现实是，呵呵，我被怼的体无完肤**。

优化之一就是通过**减少事务持有锁的时间**来优化的，例如我们秒杀一个物品的话，如果减库存和插入订单两个操作都成功的话，代表秒杀成功，这两个操作会在一个事务里完成。问题来了，是先减库存呢？还是先插入订单呢？

我说了先插入订单在减库存能够减少事务锁的持有时间，然后我就被面试官怼死了，如下：

面试官：你觉得你这个优化有用吗？

我：有啊，可以减少锁的持有时间（确实可以减少锁的持有时间）

面试官：那你说说提高了多少并发量？

我：这个，，没测试过（我是看视频的，自己也没有这样的测试工具，有点尴尬，连测试过都没有？？）

面试官：那你说说这条事务执行需要多少时间

我：我，，好像忘了具体数据，大概是0.00几秒吧。

面试官：你自己都说0.00几秒了，这么短时间，你觉得你的这个优化，用处大吗？有数据来支撑下吗？

我：,,,,，（真的自己给自己挖坑了，早知道随便介绍下就好了，不主动说自己的优化了过程了，毕竟自己没实操过）

面试官：你这个系统能扛多少并发量？

我：…没测试过（我觉得，面试官觉得这个项目是假的了，可能觉得我是从网上随便找的，然后来应付面试的，我觉得自己凉了，**欺骗**可是非常严重的）。

面试官：那你说说，完成一条请求用了多少时间（测试最大的并发量可能需要相应的工具，他可能为了再次确认我的真伪，故意是一条请求的？这样就不需要工具了）

我：…..没测试过（好吧，我的心已凉）

面试官：好吧，就说到这里，你用过lowJS吗？

我：啊？？lowJS，什么鬼东西？而且他的声音有点小，我再次确认，是指lowJS吗？他说是，我说没听说过（后来才知道，他说的是Node.js，，，，，，麻痹，，，）。

面试官：你还有啥问题要问的？

呵呵，，，已经凉了，这次面试真的是自己给自己挖坑，面试官肯定是知道我项目是伪造的，这是非常严重的事情，然后这个面试大概是持续了10几分钟，其他的面试官的也没问了。想找给人吐槽下自己。

然后，明天就查到挂的信息了，之前二面是一个星期多才查到挂了，这次是十二个小时之后就收到挂了，我也知道10000%挂的了。此刻需要一波安慰！！

总结

总结就是一首凉凉送给自己，还有就是有一些建议，当然，这也是我自己给自己的建义。

1、高频面试题，别停留于表面，大家都懂，说的很表面没啥优势。

2、别以为自己懂了，如果可以，最好自己尝试描述一下，你可能会描述的很没有逻辑。

3、好好准备一个项目吧，一定要自己脚踏实地做一下， 别像我，被怼的体无完肤。

4、框架真的问的很少，好好打基础，数据结构与算法，计算机网络，操作系统，Linux 进程等相关的命令。

5、面试的第一关是笔试，一般都是编程题，建议要刷刷题，不然面试的机会都没有。



### 蚂蚁金服

**意外的一面**

一面的时候大概是3月12号，面完等了差不多半个月才突然接到二面面试官的电话。一面可能是简历面，所以问题比较简单。

**ArrayList和LinkedList区别**

ArrayList 是一个可改变大小的数组。当更多的元素加入到ArrayList中时，其大小将会动态地增长。内部的元素可以直接通过get与set方法进行访问，因为ArrayList本质上就是一个数组，

LinkedList 是一个双链表，在添加和删除元素时具有比ArrayList更好的性能.但在get与set方面弱于ArrayList。

当然，这些对比都是指数据量很大或者操作很频繁的情况下的对比,如果数据和运算量很小，那么对比将失去意义。

**什么情况会造成内存泄漏**

在Java中，内存泄漏就是存在一些被分配的对象，这些对象有下面两个特点：

首先，这些对象是可达的，即在有向图中，存在通路可以与其相连；

其次，这些对象是无用的，即程序以后不会再使用这些对象。

如果对象满足这两个条件，这些对象就可以判定为Java中的内存泄漏，这些对象不会被GC所回收，然而它却占用内存。

**什么是线程死锁，如何解决** 

产生死锁的条件有四个：

1. 互斥条件：所谓互斥就是进程在某一时间内独占资源。 
2. 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。 
3. 不剥夺条件:进程已获得资源，在末使用完之前，不能强行剥夺。 
4. 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。

线程死锁是因为多线程访问共享资源，由于访问的顺序不当所造成的，通常是一个线程锁定了一个资源A，而又想去锁定资源B；在另一个线程中，锁定了资源B，而又想去锁定资源A以完成自身的操作，两个线程都想得到对方的资源，而不愿释放自己的资源，造成两个线程都在等待，而无法执行的情况。

要解决死锁，可以从死锁的四个条件出发，只要破坏了一个必要条件，那么我们的死锁就解决了。在java中使用多线程的时候一定要考虑是否有死锁的问题哦。

**红黑树是什么？****怎么实现？时间复杂度** 

红黑树(Red-Black Tree，简称R-B Tree)，它一种特殊的二叉查找树。红黑树是特殊的二叉查找树，意味着它满足二叉查找树的特征：任意一个节点所包含的键值，大于等于左孩子的键值，小于等于右孩子的键值。除了具备该特性之外，红黑树还包括许多额外的信息。

红黑树的每个节点上都有存储位表示节点的颜色，颜色是红(Red)或黑(Black)。红黑树的特性:

1. 每个节点或者是黑色，或者是红色。
2. 根节点是黑色。
3. 每个叶子节点是黑色。
4. 如果一个节点是红色的，则它的子节点必须是黑色的。
5. 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。

关于它的特性，需要注意的是：

第一，特性(3)中的叶子节点，是只为空(NIL或null)的节点。

第二，特性(5)，确保没有一条路径会比其他路径长出俩倍。因而，红黑树是相对是接近平衡的二叉树。

![img](https://app.yinxiang.com/shard/s13/res/50f0c5cf-e9dc-4cd7-a4f7-93f653e62bba/640.jpg)

具体实现代码这里不贴了，要实现起来，需要包含的基本操作是添加、删除和旋转。在对红黑树进行添加或删除后，会用到旋转方法。旋转的目的是让树保持红黑树的特性。旋转包括两种：左旋 和 右旋。

红黑树的应用比较广泛，主要是用它来存储有序的数据，它的查找、插入和删除操作的时间复杂度是O(lgn)。

**TCP三次握手** 

三次握手（three times handshake；three-way handshake）所谓的“三次握手”即对每次发送的数据量是怎样跟踪进行协商使数据段的发送和接收同步，根据所接收到的数据量而确定的数据确认数及数据发送、接收完毕后何时撤消联系，并建立虚连接。

为了提供可靠的传送，TCP在发送新的数据之前，以特定的顺序将数据包的序号，并需要这些包传送给目标机之后的确认消息。TCP总是用来发送大批量的数据。当应用程序在收到数据后要做出确认时也要用到TCP。

![img](https://app.yinxiang.com/shard/s13/res/6c853af6-4186-4be8-888d-308a4500fefe/640.jpg)

第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。

第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；

第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。

***2***

**突然的二面**

一面的时候大概是3月12号，面完等了差不多半个月才突然接到二面面试官的电话。

**介绍项目**

**Storm怎么保证一致性** 

Storm是一个分布式的流处理系统，利用anchor和ack机制保证所有tuple都被成功处理。如果tuple出错，则可以被重传，但是如何保证出错的tuple只被处理一次呢？Storm提供了一套事务性组件Transaction Topology，用来解决这个问题。

Transactional Topology目前已经不再维护，由Trident来实现事务性topology，但是原理相同。

参考：https://dwz.cn/8bXRPexB

**说一下hashmap以及它是否线程安全**

HashMap基于哈希表的 Map 接口的实现。HashMap中，null可以作为键，这样的键只有一个；可以有一个或多个键所对应的值为null。HashMap中hash数组的默认大小是16，而且一定是2的指数。Hashtable、HashMap都使用了 Iterator。而由于历史原因，Hashtable还使用了Enumeration的方式 。HashMap 实现 Iterator，支持fast-fail。

哈希表是由数组+链表组成的，它是通过把key值进行hash来定位对象的，这样可以提供比线性存储更好的性能。

![img](https://app.yinxiang.com/shard/s13/res/5c7adcf6-7378-4ed7-a047-835092123b1e/640.jpg)

￼

HashMap不是线程安全的。

**十亿条淘宝购买记录，怎么获取出现最多的前十个** 

这是一道典型的有限内存的海量数据处理的题目。一般这类题目的解答无非是以下几种：

分治，hash映射，堆排序，双层桶划分，Bloom Filter，bitmap，数据库索引，mapreduce等。

具体情形都有很多不同的方案。这类题目可以到网上搜索一下，了解下套路，后面就基本都会了。

**平时有没有用linux系统，怎么查看某个进程** 

```
ps aux|grep java 查看java进程ps aux 查看所有进程ps –ef|grep tomcat 查看所有有关tomcat的进程ps -ef|grep --color java 高亮要查询的关键字kill -919979 终止线程号位19979的进程
```

**说一下Innodb和MySIAM的区别**

MyISAM类型不支持事务处理等高级处理，而InnoDB类型支持。MyISAM类型的表强调的是性能，其执行数度比InnoDB类型更快，但是不提供事务支持，而InnoDB提供事务支持以及外部键等高级数据库功能。

InnoDB不支持FULLTEXT类型的索引。

InnoDB 中不保存表的具体行数，也就是说，执行select count(*) from table时，InnoDB要扫描一遍整个表来计算有多少行，但是MyISAM只要简单的读出保存好的行数即可。注意的是，当count(*)语句包含 where条件时，两种表的操作是一样的。

对于AUTO_INCREMENT类型的字段，InnoDB中必须包含只有该字段的索引，但是在MyISAM表中，可以和其他字段一起建立联合索引。

DELETE FROM table时，InnoDB不会重新建立表，而是一行一行的删除。

LOAD TABLE FROM MASTER操作对InnoDB是不起作用的，解决方法是首先把InnoDB表改成MyISAM表，导入数据后再改成InnoDB表，但是对于使用的额外的InnoDB特性(例如外键)的表不适用。

**说一下jvm内存模型，介绍一下你了解的垃圾收集器** 

其实并没有jvm内存模型的概念。应该是Java内存模型或者jvm内存结构，这里面试者一定要听清楚问的是哪个，再回答。

可以参考：JVM内存结构 VS Java内存模型 VS Java对象模型

**你说你是大数据方向的，了解哪些大数据框架**

作者回答了一些zookeeper、storm、HDFS、Hbase等

**其他问题**

100个有序的整型，如何打乱顺序？

如何设计一个可靠的UDP协议？

二面大概就是这些，其中storm一致性这个问题被面试官怀疑了一下，就有点紧张，其实没答错，所以还是要对知识掌握得更明确才行。

***3***

**准备充足的三面**

清明节的时候例外地没有回家扫墓，因为知道自己的弱项是操作系统和海量数据题这块，所以想着恶补这方面的知识，不过之后的面试意外的并没有问到这方面的内容。

**介绍项目**

项目介绍完之后没问太多

**介绍一下hashmap**

HashMap真的是面试高频题，多次面试都问到了，一定要掌握。

**介绍一下并发**

这里可以把整个并发的体系都说下，包括volatile、synchronized、lock、乐观悲观锁、锁膨胀、锁降级、线程池等

**银行账户读写怎么做**

我说了读写锁以及可能出现死锁问题

**说一下关系型数据库和非关系型数据库的区别** 

非关系型数据库的优势：

1. 性能：NOSQL是基于键值对的，可以想象成表中的主键和值的对应关系，而且不需要经过SQL层的解析，所以性能非常高
2. 可扩展性：同样也是因为基于键值对，数据之间没有耦合性，所以非常容易水平扩展。

使用场景：日志、埋点、论坛、博客等

关系型数据库的优势：

1. 复杂查询：可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询
2. 事务支持:使得对于安全性能很高的数据访问要求得以实现。

使用场景：所有有逻辑关系的数据存储

**如何访问链表中间节点**

对于这个问题，我们首先能够想到的就是先遍历一遍整个的链表，然后计算出链表的长度，进而遍历第二遍找出中间位置的数据。这种方式非常简单。

若题目要求只能遍历一次链表，那又当如何解决问题？

可以采取建立两个指针，一个指针一次遍历两个节点，另一个节点一次遍历一个节点，当快指针遍历到空节点时，慢指针指向的位置为链表的中间位置，这种解决问题的方法称为快慢指针方法。

**说下进程间通信，以及各自的区别**

进程间通信是指在不同进程之间传播或交换信息。方式通常有管道（包括无名管道和命名管道）、消息队列、信号量、共享存储、Socket、Streams等。

**访问淘宝网页的一个具体流程，从获取ip地址，到怎么返回相关内容**

先通过DNS解析到服务器地址，然后反向代理、负载均衡服务器等，寻找集群中的一台机器来真正执行你的请求。还可以介绍CDN、页面缓存、Cookie以及session等。

这个过程还包括三次握手、HTTP request中包含哪些内容，状态码等，还有OSI七层分层可以介绍。

服务器接到请求后，会执行业务逻辑，执行过程中可以按照MVC来分别介绍。

服务处理过程中是否调用其他RPC服务或者异步消息，这个过程包含服务发现与注册，消息路由。

最后查询数据库，会不会经过缓存？是不是关系型数据库？是会分库分表还是做哪些操作？

对于数据库，分库分表如果数据量大的话是有必要的，一般业务根据一个分表字段进行取模进行分表，而在做数据库操作的时候，也根据同样的规则，决定数据的读写操作对应哪张表。这种也有开源的实现的，如阿里的TDDL就有这种功能。分库分表还涉及到很多技术，比如sequence如何设置 ，如何解决热点问题等。

最后再把处理结果封装成response，返回给客户端。浏览器再进行页面渲染。

***4***

**焦虑的hr面**

之所以说hr面焦虑，是因为面试前我还在看IG的半决赛（实在复习不下），接到电话的时候分外紧张，在一些点上答得很差。

**遇到什么挫折**

这种问题主要考察面试者遇见困难是否能坚持下去，并且可以看出他的解决问题的能力。

可以简单描述挫折，并说明自己如何克服，最终有哪些收获。

**职业规划** 

表明自己决心，首先自己不准备继续求学了，必须招工作了。然后说下自己不会短期内换行业，或者换工作，自己比较喜欢，希望可以坚持几年看自己的兴趣再规划之类的。

**对阿里的认识** 

腾讯一面（有参考价值）

**1、自我介绍**

**2、说下项目，主要用了什么技术？**

**3、如果现在让你改进项目的话你会怎么做？**
可以先把mysql数据库用docker改进为PXC集群，用haproxy进行负载均衡，在后端用redis集群，nginx负载均衡，再到后期的话可以采用分布式dubbo+zookeeper。

**4、zookeeper用过吗？怎么实现的？**
有了解过没用过，答得很浅，只回答了数据的同步、锁相关，节点下有一个版本序列进行控制。
详情：
https://blog.51cto.com/13732225/2177083

**5、集群要考虑什么？**
要考虑节点承受不住太多数据而宕机的情况，因此要进行负载均衡进行分配请求等等。。。答得不是很深
供参考：
https://www.cnblogs.com/kevingrace/p/6031392.html

**6、负载均衡都有那些算法呢？**

- 随机：负载均衡方法随机的把负载分配到各个可用的服务器上，通过随机数生成算法选取一个服务器，然后把连接发送给它。虽然许多均衡产品都支持该算法，但是它的有效性一直受到质疑，除非把服务器的可运行时间看的很重。
- 轮询：轮询算法按顺序把每个新的连接请求分配给下一个服务器，最终把所有请求平分给所有的服务器。轮询算法在大多数情况下都工作的不错，但是如果负载均衡的设备在处理速度、连接速度和内存等方面不是完全均等，那么效果会更好。
- 加权轮询：该算法中，每个机器接受的连接数量是按权重比例分配的。这是对普通轮询算法的改进，比如你可以设定：第三台机器的处理能力是第一台机器的两倍，那么负载均衡器会把两倍的连接数量分配给第3台机器。
- 动态轮询：类似于加权轮询，但是，权重值基于对各个服务器的持续监控，并且不断更新。这是一个动态负载均衡算法，基于服务器的实时性能分析分配连接，比如每个节点的当前连接数或者节点的最快响应时间等。
- 最快算法：最快算法基于所有服务器中的最快响应时间分配连接。该算法在服务器跨不同网络的环境中特别有用。
- 最少连接：系统把新连接分配给当前连接数目最少的服务器。该算法在各个服务器运算能力基本相似的环境中非常有效。
- 观察算法：该算法同时利用最小连接算法和最快算法来实施负载均衡。服务器根据当前的连接数和响应时间得到一个分数，分数较高代表性能较好，会得到更多的连接。
- 预判算法：该算法使用观察算法来计算分数，但是预判算法会分析分数的变化趋势来判断某台服务器的性能正在改善还是降低。具有改善趋势的服务器会得到更多的连接。该算法适用于大多数环境。

**7、BIO和NIO的区别？**
这个很简单，推荐一个简单理解的博客：
https://blog.csdn.net/skiof007/article/details/52873421

**8、select和epoll的区别？**
NIO虽说是非阻塞的但其实select还要轮询去等待获取消息，epoll是让内核去处理再通知它就行了，这点答得很浅而且不太准确，没从底层去答，因为底层实在不太了解。
总结：
https://www.cnblogs.com/Anker/p/3265058.html

**9、你用redis做过什么呢，有什么优点呢？**
做过分布式的锁和后端的redis集群。

[Redis 为什么这么快？](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247486035&idx=1&sn=88ff9f4eada08bd2f111a5d7ecb78aab&scene=21#wechat_redirect)

**10、你在后台用nginx进行集群的负载均衡，那新加一个节点怎么保证数据一致？谈谈一致性哈希算法，会产生什么问题？**
各个节点形成一个封闭环，数据顺时针加入离它最近的节点里balabala。。。还提到了数据倾斜的问题，设置虚拟节点就好了。

**11、了解过微服务吗？**
了解过一点，像分布式那样，不过拆分的粒度更小了，每个业务都单独地拆分出来，降低了耦合性。

**12、用过什么设计模式吗？**
单例模式、工厂模式、模板方法模式(竟然忘了说代理模式了我对动态代理的源码还是比较了解的。。。)

**13、工厂模式怎么用的？有什么优点？**
[轻松看懂java设计模式简单工厂模式](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247484993&idx=1&sn=7e6b020685e379d2d4e77d452f5a5736&scene=21#wechat_redirect)

**14、谈谈IOC和AOP**
[面试被问烂的 Spring IOC(求求你别再问了)](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247486048&idx=1&sn=bda7fe6bc48389e722b2e8d0dee35462&scene=21#wechat_redirect)

**15、刚才谈AOP的时候提到了事务，那你说说mysql的事务特性都有什么？**
ACID 原子性、一致性、隔离性、持久性 大致解释了一下

**16、你做项目时遇见过数据库查询缓慢吗？当时是什么原因怎么解决的？**
刚开始有表设计方面问题，之后又发现在联合查询时没用到索引。

**17、如果你表里有一亿条数据怎么去有效的查询数据？**
(当时有点小懵，按理说不应该问索引引擎方面的问题吗？)答了mysql的分表，水平拆分和垂直拆分大致说了一下
这篇文章很好：
http://www.cnblogs.com/lonelyxmas/p/3632020.html

**18、除了分表还有其他方式吗？有用过大数据吗？了解过ai吗？**
(这才知道想问的是大数据)表示没学过大数据，但很愿意去学，因为大数据好多也是基于java的，之后肯定会学的。至于ai，之前课程里有用python写过一点很浅的东西，但深层次的不太了解

**19、出个逻辑题啊，一个5L杯子一个6L杯子从河里取水，怎么得到3L水？**
(有点猝不及防)让我想一下啊。。。过了10s左右。。。嘴里嘟囔着先考虑这种情况，先用6L的取满水倒5L杯子里，6L的就剩1L，再把5L的倒掉，再把6L剩余的倒5L杯子里面。。。(说着说着就畅快了，仿佛抓住了希望的那种感觉)

### 又一个蚂蚁金服（较为简单）

流程

HashMap 底层实现原理是什么？**

这个作为一个面试必问的题目，所以我还是提前准备过的，看过源码。所以这个问题不是问题，答完，面试官说回答的对了。

> HashMap，HashTable，ConcurrentHashMap 面试必备，针对1.7和1.8的不同实现加以说明。包括底层的数据结构，Hash 碰撞生成链表，Java8的链表转红黑树。

Java 的多线程有没有使用过**

根据自身情况，用过就用过，没用过就没有用过。我回答有简单的使用过，但是使用的场景不多。面试官也就没追问了，说了没关系，就继续。

讲一下线程池，以及实现固定大小线程池底层是如何实现的？**

讲了下四中线程池，单一线程池，固定大小线程池，缓存线程池，定时线程池。但是关于固定大小线程池底层是如何实现的，回答的不好，面试官直接问底层的源码是不是没看过，就说是的。面试官说没关系。。。

> 追加：线程池底层都是通过`ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler)`来实现的。
>
> `corePoolSize`: 表示需要设置的线程个数； 
>
> `maximumPoolSize`: 线程池允许的最大线程个数；
>
>  `keepAliveTime`: 空闲线程存活的时间，超过这个时间就会被回收； 
>
> `unit`: 存活时间的单位；
>
> `workQueue`: 需要执行的任务队列。
>
> `threadFactory`: 线程工厂，用于创建线程，一般用默认的即可； 
>
> `handler`: 拒绝策略，当任务太多来不及处理，如何拒绝任务； 拒绝策略： 直接丢弃（DiscardPolicy） 丢弃队列中最老的任务(DiscardOldestPolicy) 抛异常(AbortPolicy) 将任务分给调用线程来执行(CallerRunsPolicy)

**Redis 为什么这么高效，使用的场景是什么？**

回答了一下我们使用 redis 做缓存和登录 session 存在的场景，以及 redis 是单线程的。

> 1、完全基于内存，大多数请求都是内存操作，非常快速；
>
>  2、数据结构简单，操作简单；
>
>  3、采用单线程，避免了不必要的上下文切换和竞争条件，不存在多进程或者多线程的切换，不用考虑锁带来的性能消耗；
>
>  4、使用多路 I/O复用模型，非阻塞 IO

分布式服务是否了解，zookeeper，dubbo 是否使用过？**

关于 zk 和 dubbo 这块用的不多，zk 主要是在使用 kafka 的时候会用到，但是不涉及原理上面的研究。dubbo 虽然项目中有用过，但是并不是很深入，就没说用过，直接说没用过。

幂等概念有没有了解过**

> 幂等性是数学上的含义是对于参数 x，f(x)=f(f(x));比如绝对值函数。 在分布式环境下表示的是对于同样的请求，在一次或者多次请求的情况下对系统的使用资源是一样的。保证失败重试不会导致提交两次。 方法： 带版本号的方式； 采用数据库唯一索引方式；



**11、如果现在一台生产的数据库挂了怎么处理？**

首先这题没有 get 的面试官想问的点是什么，所以就根据自己项目本身的情况做答了。我们项目生产上的数据库是有主备的，在主数据库挂掉的情况下是会切换到备数据库，先保证业务的稳定性，然后在对崩溃现场进行保留，方便后续分析问题，找到原因。这里面试官追问了一下，我们主备的切换是自动的还是手动的，这个由于是公司运维团队负责的，自己本身不是特别清楚，但是根据对公司运维团队的了解，应该是自动的。所以就这样如实的回答了。

数据库如何实现 rollback 的？**

数据库在写入数据之前是先讲对数据的改动写入 redo log 和 undo log，然后在操作数据，如果成功提交事务就会讲操作写入磁盘；如果失败就会根据redo log 和 undo log 逆向还原到事务操作之前的状态。

**13、工作这么久你遇到的最难的技术点是什么？**

我这边根据具体的工具经理，回答的是 kafka 的初次使用，因为当时是公司内部第一个引入 kafka，之前没有小组使用过，所以要采很多坑。并且那个时候 kafka 还没有发布1.0版本，官网和网上提供的版本很杂乱不兼容。

**14、用过Kafka 的话说下 Kafka优缺点有哪些？**

•Kafka 是一个高吞吐量的消息队列。基本的组件有生产者，消费者，node 节点，生产者负责生产消息，将消息发送到指定的 topic 或者 partition 当中。

•每个 partition 可以有多个分区副本，并且存放在不同的 broker 节点上，保证数据的安全。partiton 的底层是根据 segment 段存放的一系列日志文件，文件里面存放的具体的消息内容，每条消息都有一个唯一的 offset 偏移量，并且是按照磁盘顺序存放的。由于磁盘是顺序读写，所以 kafka 可以有很高的吞吐量。磁盘的顺序读写比随机读写的性能高很多。

•每个消费者都属于一个消费者组，可以消费指定 topic 下的数据。

**15、TCP/IP 协议是如何保证数据可靠性的？**

首先 TCP是面向连接的传输协议。主要通过消息确认和重试机制来保证数据传输的可靠性。

电面二

二面的时间是在第二周，周四下午的时候打电话过来，问是否可以面试。但是当时在上班就说不方便，能否周五晚上面试。面试官说可以。谁知道，第二天中午还没下班就打电话过来说面试，可能本来周五大家各自事情都多吧，他也想尽快搞完。我这边被突然的面试电话给搞懵了一下，想着不是约好了晚上么，怎么搞突击。。。但是没办法，已经推过一次，没好意思再推掉。就说了我要找个安静地方，稍等下。

> 整个面试过程不是很好，主要是在公司内部找了个没人的地方，说话声音都不敢大，而且还经常有人经过，来来回回的。感觉这点没有决策好，也是这次的一个遗憾。**所以大家电话面试的时候一定要找个没人的地方。**

流程

**1、先进行自我介绍，然后介绍自己做过的项目，从项目流程架构设计等方面介绍**

根据个人经历说了自己所做的项目，以及流程和架构方面，因为是自己参与的项目，所以整个流程说的还是很流畅的。毕竟自己很熟悉。这块尽量多从几个方面讲，流程，架构，设计等。

**2、HashMap 的查询时间复杂度**

理想情况下是 O(1)的，但是实际中会出现 hash 碰撞，导致无法达到效果。

**3、LinkedList和ArrayList的区别**

•LinkedList 底层是基于双向链表实现的，而 ArrayList 底层是基于动态数组实现的；

•查询的时候 LinkedList 的效率要低于 ArrayList，因为 LinkedList 需要遍历链表，而 ArrayList 底层数组根据下标直接获取数据。

•插入删除数据的时候，LinkedList 效率比ArrayList 效率高，因为 ArrayList 在数据多的情况下会进行数组扩容或移动数组。

3  **4、多进程与多线程在编程上面有什么需要注意的**

首先进程是资源分配的最小单元，线程是任务调度的最小单元

**5、ThreadLocal的使用场景**

ThreadLocal 适用于每个线程需要自己独立的实例且该实例需要在多个方法中被使用，也即变量在线程间隔离而在方法或类间共享的场景。

**6、堆内存和栈内存有什么区别**

•堆内存是线程共享的，栈内存是线程私有的；

•堆内存用来存放由new创建的对象和数组，栈内存中存放一些基本类型的变量和对象的引用变量；

**7、堆排序时间复杂度**

**8、如果优化数据库的数据查询，另外应用层上还能如何优化？**



1）数据库层面上：

•除了主键索引，唯一索引之外，对于常用的查询字段也要加索引。查询的时候尽量使用主键索引，因为MySQL 的 InnoDB 的主键索引索引的是整行数据，而普通索引索引的是主键，会有回表操作。当然索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，需要酌情考虑。 2、优化查询语句，尽量采用确认性查询语句，减少 or，in，not in，%xxx%语法的使用。



2）应用层面上：

•采用缓存机制，将常用的数据进行缓存，增加访问速度；

•分库分表，读写分离，将数据分开读写，提升性能



**9、强一致性，弱一致性，最终一致性**

•强一致性：对于更新后的数据，要求后续所有节点的任何操作都要获取最新值的情况；

•弱一致性：对于更新后的数据，后续节点的数据操作可以是新值，也可以是旧值，通过一段时间后后续节点对数据的操作都是新值；

•最终一致性：是弱一致性的特殊形式，存储系统保证在没有新的更新的条件下，最终所有的访问都是最后更新的值。

**10、有一个一百万行的文件，内部是购买的商品ID，如何获取到购买最多的前一百个商品。**

•思路：首先考察的肯定是大数据处理方案，这些数据肯定不能一次性读取到内存，那就需要拆分，将数据分隔处理。假设要分隔为 n 个文件。

•分隔：如果 ID 是整型的话，可以直接采用取模（id % n）的方式；如果 ID 是字符串可以先计算 hash 值然后再取模（hash(x) % n）的方式，将相同 ID 的商品分到同一个文件中。

•针对每个小文件进行 top100的排序，返回购买最多的100个商品 ID

•根据 n 个文件中的100个 ID，在进行一次排序，即可得到需要的数据。



### 招银网络

**1 Java的八大基本类型**

byte、short、int、long、float、double、char、boolean。

**2 Java除了基本类型以外还有哪些类能表示数字**

这个题目在我的理解来说，如果不认真思考，可能很难听懂面试官说的是什么意思。

我想，面试官的意思是，在 Java 中基本的数据类型有8种是可以来表示数字的，但是，Java 中除了有基本类型还有包装类型，通过装箱拆箱机制，同样可以表示数字。

不仅仅如此，还有大数的类可以表示数字：两个高精度大整数BigInteger 和高精度浮点数BigDecimal。

具体用法查看
https://www.cnblogs.com/yxwkf/p/5332157.html

另外，除了这个大数类型外，还有原子类型AtomicBoolean,AtomicInteger,AtomicLong,AtomicReference，AtomicIntegerFieldUpdater,AtomicLongFieldUpdater, AtomicReferenceFieldUpdater。

具体查看
https://www.cnblogs.com/yuyutianxia/p/7154645.html

**3 介绍JVM堆和栈，有什么用，A a = new A()；各放在哪个位置**

堆：FIFO队列优先，先进先出。jvm只有一个堆区被所有线程所共享！堆存放在二级缓存中，调用对象的速度相对慢一些，生命周期由虚拟机的垃圾回收机制定。
栈：FILO先进后出，暂存数据的地方。每个线程都包含一个栈区！栈存放在一级缓存中，存取速度较快，“栈是限定仅在表头进行插入和删除操作的线性表”。
方法区：用来存放方法和static变量。

二、存储的数据类型

1、堆用来存储new出来的对象和数组
2、栈用来存储基本类型变量和对象的引用变量的地址
3、方法区存储方法和static变量

三、优缺点

1、堆的优点-可以动态的分配内存大小，生命周期不确定。缺点-速度略慢
2、栈的优点-速度快，缺点-存在栈中的数据大小和生命周期必须是明确的，缺少灵活性。

答案看下面链接中那篇Jvm的文章
https://blog.csdn.net/qq_20641565/article/details/60332593

**4 HashMap扩容过程，初始容量，和HashTable的区别**

查看：[HashMap详解](http://mp.weixin.qq.com/s?__biz=MzI3ODg2OTY1OQ==&mid=2247483957&idx=1&sn=e865001c7284ac5b00e67507c1b9410c&chksm=eb5121c1dc26a8d76cda63ba0dcbc1ffa259bd0b68759d6f887bd8b2a88b07eddc79a980b55a&scene=21#wechat_redirect)

**5 构造线程的方法**

继承Thread类，实现Runnable接口，实现Callable接口，线程池。

答案参考csdn博客的一篇文章：
https://blog.csdn.net/sihai12345/article/details/80256322

**6 线程池构造器的参数和作用**

参考csdn博客：
https://blog.csdn.net/sihai12345/article/details/82870009

**7 mysql有哪些引擎，区别**

这张图可以解决

![img](https://app.yinxiang.com/shard/s13/res/f8e377a7-6c8c-48a5-ac70-c7aa3ce260a2/640.jpg)

![img](https://app.yinxiang.com/shard/s13/res/f8e377a7-6c8c-48a5-ac70-c7aa3ce260a2/640.jpg)

**8 mysql优化**

mysql优化：[Mysql优化](http://mp.weixin.qq.com/s?__biz=MzI3ODg2OTY1OQ==&mid=2247485099&idx=1&sn=af95eb7ca0d72480a6071b870a0bd674&chksm=eb51255fdc26ac4997ff9173459bf8d5078a1d53fe277cc4458e859f97d8177c88c5f926919f&scene=21#wechat_redirect)

**9 spring IOC的作用，有哪些注解，有什么用**

老问题了，分享一篇简单易懂的文章
https://www.cnblogs.com/xdp-gacl/p/4249939.html

**10 手写一个快排**





### 美团

找到单链表的三等分点，如果单链表是有环的呢 

用快慢指针，一个走一步，一个走三步。如果有环，先判断环在哪，找最后一个节点，然后用之前的无环的做法 



美团技术二面60分钟，详细问答

> 面完一面正准备出去打羽毛球，北京的电话又来了。（注定这周五参加不了球队活动了！） 
>
> 二面：跟一面比起来，二面面试官的声音听起来就像是搞技术开发的，果不其然，一个小时的纯技术电话面试！面的特别全面！

**1、Spring：有没有用过Spring，Spring IOC、AOP机制与实现，Spring MVC**

其实我挺不想被问到Spring的细节的，框架这些我都没有复习不太记得了。所以我对面试官说Spring里面的一些比较重要的机制我理解的还不错，然后我用一个实际的例子把我对IOC、AOP理解讲了一下，他听了说对，理解的不错（难得遇到一个边面试边能给反馈的面试官，好开心） 

Spring MVC其实我用过，我就对面试官讲了我的项目中用到的Servlet，jsp和javabean实现的MVC，以及MVC各个模块职责以及每个模块是怎么联系到一起的，最后我补充了一句我想SpringMVC的思想其实跟这个是一样的（他说对的，嘿嘿有反馈真好） 

**2、多线程：怎么实现线程安全，各个实现方法有什么区别，volatile关键字的使用，可重入锁的理解，Synchronized是不是可重入锁**

这里我就主要讲了Synchronized关键字，还有并发包下面的一些锁，以及各自的优缺点和区别。volatile关键字我主要从可见性、原子性和禁止JVM指令重排序三个方面讲的，再讲了一下我在多线程的单例模式double-check中用到volatile关键字禁止JVM指令重排优化。 

**3、集合： HashMap底层实现，怎么实现HashMap线程安全** 

我讲了一下HashMap底层是数组加单链表实现，Node内部类，add的过程，Hash冲突解决办法，扩容，三种集合视图。HashMap线程安全的实现方式主要讲了HashTable、ConcurrentHashMap以及Collections中的静态方法SynchronizedMap可以对HashMap进行封装。以及这三种方式的区别，效率表现。 

**4、JVM内存管理，GC算法，HotSpot里面的垃圾回收器、类加载** 

JVM内存主要分为五个区，哪些是线程共享的，哪些是线程独享的，每个区存放什么。GC方面：怎么判断哪些对象需要被GC，GC的方法，Minor GC与Full GC。HotSpot GC算法以及7种垃圾回收期，主要讲了CMS和G1收集器。类加载：类加载的过程，Bootstrap classloader-ExtClassloader-AppClassloader，父类委托机制。 

**5、进程和线程的区别**

从调度、并发性、拥有的资源和系统开销四个方面回答的。 

**6、HTTP有没有状态，我说无状态，怎么解决HTTP无状态** 怎么解决HTTP无状态其实就是怎么进行会话跟踪，有四种方法：URL重写、隐藏表单域、Cookie、Session。 

**7、Java IO，NIO，Java中有没有实现异步IO**

Java IO实现的是同步阻塞，它是怎么实现同步阻塞的。我拿了read()方法举例来讲的。NIO实现的是同步非阻塞，我详细讲了一下Selector中的select()方法轮询说明它是如何实现多路复用IO的。然后对比了一下他们的效率。面试官可能看我对这一块比较了解，又继续问我Java中有没有实现异步IO，我感觉好像没有，但面试官说有，让我想想，其实这里我并不清楚啦，所以我就对面试官讲了一下我对Unix中异步IO模型的理解，然后说至于Java里面有没有我真的不太清楚。（他居然笑了！说你理解是对的，Java里面有没有不重要！哈哈）

**8、前端会不会，Ajax是什么，Ajax实现原理** 

前端我只是会用一些js而已，用过jquery框架，问我Ajax全称是啥，我猜是异步的js和xml。Ajax实现原理其实我也不懂，我就只简单讲了一下它通过XMLHttpRequest对象进行异步查询，Ajax引擎在客户端运行，减少了服务器工作量。

**9、让我设计一个线程池** 

因为我简历中有写到我对多线程、并发这一块理解比较好。所以他老问这方面的题。这个问题因为我之前看过ThreadPoolExecutor的源代码，所以我就仿照那个类的设计思路来想的，详细讲了一下核心池、创建线程可以用工厂方法模式来进行设计、线程池状态、阻塞队列、拒绝策略这几个方面。设计的还算比较周全。

**10、讲几个设计模式，哪些地方用到了，为什么要用**

单例模式，jdk中的getRuntime()；工厂方法模式，ThreadPoolExcutor用到ThreadFactory；观察者模式：java.util包下面的Observable和Observer。最后主要讲了一下工厂方法模式的使用场景。

**11、Mysql优化、索引的实现**

我从数据库设计优化和查询优化两方面讲的。索引B+树实现，InnoDB和MyISAM主键索引的实现区别，一个聚集一个非聚集。 

**12、事务的隔离级别**

四种隔离级别，可能会出现哪些异常，mysql中默认级别。 

**13、有没有用过Hibernate、mybatis、git**

这个简单讲一下就好，分别是干什么的

*14、Linux *

我说这个本科学过，但是很久没用，命令忘光了。他说没事，考你几个简单的：cd、ls、dir（真的是简单的）

**15、算法题**

- 从10万个数中找最小的10个，时间复杂度分析（最大堆，考虑内存）
- 从一个有正有负数组中找连续子数组的最大和，时间复杂度分析（动态规划）
- 满二叉树第i层有多少个节点，n层的满二叉树共有多少个节点

### 终于到我提问环节了

- 1、你们是什么部门（他说是核心部门，大数据研发）
- 2、我对高并发和负载均衡挺有兴趣的，但是我平时在学校也没有这个环境让我在这方面有所体验，那你建议我目前可以怎么学呢（他说这确实是不太好学，只能看些理论和别人的博客，以后工作中才能慢慢学） 
- 3、中间件具体是做什么的，是解决高并发和负载均衡吗（他说差不多是的，然后他说我们这个部门不是中间件，是大数据部门啊，我说恩我知道） 
- 最后没啥问题了，他让我保持电话畅通。

**这一面面完，口干舌燥，我一度怀疑他可能不知道我是在应聘实习生的岗位。有太多要总结的了，放在总结的地方一起讲吧。**

美团技术三面25分钟

> 面试官说是他是另外一个部门的，需要进行交叉面试。

- 1、MySql优化 
- 2、说下项目做了些什么，架构之类的 
- 3、在collabedit上在线写代码，题目很简单是编程之美上的原题，一个有序的整数数组，输出两个数，使它们的和为某个给定的值。之前做过很快写好，然后给他讲思路。他继续问如果数组无序怎么办，先排序。 
- 4、两个文件，每个文件中都有若干个url，找出两个文件中相同的url（用HashMap） 

**这一面挺简单的，只是增加之前面试没有过的在线写代码环节，collabedit后来我才了解，像facebook一些互联网公司远程面试都会用这个在线编辑器写代码，就是文本文档写，没有提示，不能编译运行，跟白板写一样。平时练练手就好。**

美团技术HR四面30分钟

> 三面面试官说他那就是终面，说我过了等hr联系我。万万没想到半小时后的hr面居然也是技术。 

- 1、自我介绍，都四面了还自我介绍？！我还以为是单纯的hr面，所以介绍的都是我的性格和生活方面的，结果并不是。 
- 2、问项目，问的特别特别细，技术细节，还有遇到什么问题，怎么解决的，做项目有没有人带，怎么跟别人沟通的。 
- 3、数据库优化，如果数据库一个表特别大怎么办  数据库优化我就讲了之前讲过很多遍的点，他问一个表特别大怎么办：大表分小表，怎么实现：使用分区表

### 腾讯凉经

一

电话面试，随便问了些技术问题，最后还问了个LeetCode里面medium级别的算法题，偏简单

1. redis有没有用过，常用的数据结构以及在业务中使用的场景，redis的hash怎么实现的，rehash过程讲一下和JavaHashMap的rehash有什么区别？redis cluster有没有了解过，怎么做到高可用的？redis的持久化机制，为啥不能用redis做专门的持久化数据库存储？
2. 了不了解tcp/udp，说下两者的定义，tcp为什么要三次握手和四次挥手？tcp怎么保证有序传输的，讲下tcp的快速重传和拥塞机制，知不知道time_wait状态，这个状态出现在什么地方，有什么用？（参考quic）
3. 知道udp是不可靠的传输，如果你来设计一个基于udp差不多可靠的算法，怎么设计？
4. http与https有啥区别？说下https解决了什么问题，怎么解决的？说下https的握手过程。
5. 看你项目里面用了etcd，讲解下etcd干什么用的，怎么保证高可用和一致性？
6. 既然你提到了raft算法，讲下raft算法的基本流程？raft算法里面如果出现脑裂怎么处理？有没有了解过paxos和zookeeper的zab算法，他们之前有啥区别？
7. 你们后端用什么数据库做持久化的？有没有用到分库分表，怎么做的？
8. 索引的常见实现方式有哪些，有哪些区别?MySQL的存储引擎有哪些，有哪些区别？InnoDB使用的是什么方式实现索引，怎么实现的？说下聚簇索引和非聚簇索引的区别?
9. 有没有了解过协程？说下协程和线程的区别？
10. 算法题一个，剑指offer第51题，数组中的重复数字？

自己的回答情况，redis这块没啥问题，具体rehash有印象是渐进式的，但是具体原理可能答的有点出入。tcp的time_wait这块答的不是很好，之前没有了解过quic机制的实现，所以问可靠性udp的时候，基本上脑子里就照着tcp的实现在说。https这块没啥说的，之前项目里面有用到类似的东西，研究的比较清楚了。raft算法这个因为刚好在刷6.824（才刷到lab2。。。），答的也凑合，不过paxos和zab算法确实不熟悉，直接说不会。MySQL这块很熟了，包括索引，锁，事务机制以及mvcc等等，没啥说的，都已经补齐了。协程和线程，主要说了go程和Java线程的区别以及go程的调度模型。面试官提示没有提到线程的有内核态的切换，go程只在用户态调度。最后一个算法题，首先说使用HashMap来做，说空间复杂度能不能降到O(1)，后面想了大概5min才想出来原地置换的思路。

**二面项目技术面**

1. 主要针对自己最熟悉的项目，画出项目的架构图，主要的数据表结构，项目中使用到的技术点，项目的总峰值qps，时延，以及有没有分析过时延出现的耗时分别出现在什么地方，项目有啥改进的地方没有？
2. 如果请求出现问题没有响应，如何定位问题，说下思路？
3. tcp 粘包问题怎么处理？
4. 问了下缓存更新的模式，以及会出现的问题和应对思路？
5. 除了公司项目之外，业务有没有研究过知名项目或做出过贡献？

基本都没有啥问题，除了面试官说项目经验稍弱之外，其余还不错。

**三面综合技术面**

这面面的是阵脚大乱，面试官采用刨根问底的方式提问，终究是面试经验不够，导致面试的节奏有点乱。 举个例子：

> 其中有个题是go程和线程有什么区别？
> 答：1 起一个go程大概只需要4kb的内存，起一个Java线程需要1.5MB的内存；go程的调度在用户态非常轻量，Java线程的切换成本比较高。接着问为啥成本比较高？因为Java线程的调度需要在用户态和内核态切换所以成本高？为啥在用户态和内核态之间切换调度成本比较高？简单说了下内核态和用户态的定义。接着问，还是没有明白为啥成本高？心里瞬间崩溃，没完没了了呀，OS这块依旧是痛呀，支支吾吾半天放弃了。

后面所有的提问都是这种模式，结果回答的节奏全无，感觉被套路了。大多度都能回答个一二甚至是一二三，但是再往后或者再深入的OS层面就GG了。

后面问了下项目过程中遇到的最大的挑战，以及时怎么解决的？

后面还问了一个问题定位的问题，服务器CPU 100%怎么定位？可能是由于平时定位业务问题的思维定势，加之处于蒙蔽状态，随口就是：先查看监控面板看有无突发流量异常，接着查看业务日志是否有异常，针对CPU100%那个时间段，取一个典型业务流程的日志查看。最后才提到使用`top`命令来监控看是哪个进程占用到100%。果然阵脚大乱，张口就来，捂脸。。。 
本来正确的思路应该是先用`top`定位出问题的进程，再用`top`定位到出问题的线程，再打印线程堆栈查看运行情况，这个流程换平时肯定能答出来，但是，但是没有但是。还是得好好总结。

最后问了一个系统设计题目（朋友圈的设计），白板上面画出系统的架构图，主要的表结构和讲解主要的业务流程，如果用户变多流量变大，架构将怎么扩展，怎样应对？
这个答的也有点乱，直接上来自顾自的用了一个通用的架构，感觉毫无亮点。后面反思应该先定位业务的特点，这个业务明显是读多写少，然后和面试官沟通一期刚开始的方案的用户量，性能要求，单机目标qps是什么等等？在明确系统的特点和约束之后再来设计，而不是一开始就是用典型互联网的那种通用架构自顾自己搞自己的方案。

3天后收到短信被拒

**总结**

1. tcp/udp，http和https还有网络这块（各种网络模型，已经select，poll和epoll）一定要非常熟悉
2. 一定要有拿的出手的项目经验，而且要能够讲清楚，讲清楚项目中取舍，设计模型和数据表
3. 分布式要非常熟悉
4. 常见问题定位一定要有思路
5. 操作系统，还是操作系统，重要的事情说三遍
6. 系统设计，思路，思路，思路，一定要思路清晰，一定要总结下系统设计的流程
7. 一点很重要的心得，平时blog和专栏看的再多，如果没有自己的思考不过是过眼云烟，根本不会成为自己的东西，就像内核态和用户态，平常也看过，但是没细想，突然要自己说，还真说不出来，这就很尴尬了。勿以浮沙筑高台，基础这种东西还是需要时间去慢慢打牢，多去思考和总结。

相关资料补充学习:

1. 系统设计入门

   https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md

   

2. 系统设计典型问题的思考

   http://www.raychase.net/2878

3. 协程的好处有哪些

   https://www.zhihu.com/question/20511233/answer/24260355

4. Golang的goroutine是怎么实现的？

   https://www.zhihu.com/question/20862617/answer/27964865

5. Context-Switch

   https://www.zhihu.com/question/20862617/answer/27964865

6. 从Java视角理解系统结构(一)CPU上下文切换

   http://ifeve.com/java-context-switch/



### tx面经

可以先把mysql数据库用docker改进为PXC集群，用haproxy进行负载均衡，在后端用redis集群，nginx负载均衡，再到后期的话可以采用分布式dubbo+zookeeper。

**4、zookeeper用过吗？怎么实现的？**
有了解过没用过，答得很浅，只回答了数据的同步、锁相关，节点下有一个版本序列进行控制。
详情：
https://blog.51cto.com/13732225/2177083

**5、集群要考虑什么？**
要考虑节点承受不住太多数据而宕机的情况，因此要进行负载均衡进行分配请求等等。。。答得不是很深
供参考：
https://www.cnblogs.com/kevingrace/p/6031392.html

**6、负载均衡都有那些算法呢？**

- 随机：负载均衡方法随机的把负载分配到各个可用的服务器上，通过随机数生成算法选取一个服务器，然后把连接发送给它。虽然许多均衡产品都支持该算法，但是它的有效性一直受到质疑，除非把服务器的可运行时间看的很重。
- 轮询：轮询算法按顺序把每个新的连接请求分配给下一个服务器，最终把所有请求平分给所有的服务器。轮询算法在大多数情况下都工作的不错，但是如果负载均衡的设备在处理速度、连接速度和内存等方面不是完全均等，那么效果会更好。
- 加权轮询：该算法中，每个机器接受的连接数量是按权重比例分配的。这是对普通轮询算法的改进，比如你可以设定：第三台机器的处理能力是第一台机器的两倍，那么负载均衡器会把两倍的连接数量分配给第3台机器。
- 动态轮询：类似于加权轮询，但是，权重值基于对各个服务器的持续监控，并且不断更新。这是一个动态负载均衡算法，基于服务器的实时性能分析分配连接，比如每个节点的当前连接数或者节点的最快响应时间等。
- 最快算法：最快算法基于所有服务器中的最快响应时间分配连接。该算法在服务器跨不同网络的环境中特别有用。
- 最少连接：系统把新连接分配给当前连接数目最少的服务器。该算法在各个服务器运算能力基本相似的环境中非常有效。
- 观察算法：该算法同时利用最小连接算法和最快算法来实施负载均衡。服务器根据当前的连接数和响应时间得到一个分数，分数较高代表性能较好，会得到更多的连接。
- 预判算法：该算法使用观察算法来计算分数，但是预判算法会分析分数的变化趋势来判断某台服务器的性能正在改善还是降低。具有改善趋势的服务器会得到更多的连接。该算法适用于大多数环境。

**7、BIO和NIO的区别？**
这个很简单，推荐一个简单理解的博客：
https://blog.csdn.net/skiof007/article/details/52873421

**8、select和epoll的区别？**
NIO虽说是非阻塞的但其实select还要轮询去等待获取消息，epoll是让内核去处理再通知它就行了，这点答得很浅而且不太准确，没从底层去答，因为底层实在不太了解。
总结：
https://www.cnblogs.com/Anker/p/3265058.html

**9、你用redis做过什么呢，有什么优点呢？**
做过分布式的锁和后端的redis集群。

[Redis 为什么这么快？](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247486035&idx=1&sn=88ff9f4eada08bd2f111a5d7ecb78aab&scene=21#wechat_redirect)

**10、你在后台用nginx进行集群的负载均衡，那新加一个节点怎么保证数据一致？谈谈一致性哈希算法，会产生什么问题？**
各个节点形成一个封闭环，数据顺时针加入离它最近的节点里balabala。。。还提到了数据倾斜的问题，设置虚拟节点就好了。

**11、了解过微服务吗？**
了解过一点，像分布式那样，不过拆分的粒度更小了，每个业务都单独地拆分出来，降低了耦合性。

**12、用过什么设计模式吗？**
单例模式、工厂模式、模板方法模式(竟然忘了说代理模式了我对动态代理的源码还是比较了解的。。。)

**13、工厂模式怎么用的？有什么优点？**
[轻松看懂java设计模式简单工厂模式](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247484993&idx=1&sn=7e6b020685e379d2d4e77d452f5a5736&scene=21#wechat_redirect)

**14、谈谈IOC和AOP**
[面试被问烂的 Spring IOC(求求你别再问了)](https://mp.weixin.qq.com/s?__biz=MzI2OTQ4OTQ1NQ==&mid=2247486048&idx=1&sn=bda7fe6bc48389e722b2e8d0dee35462&scene=21#wechat_redirect)

**15、刚才谈AOP的时候提到了事务，那你说说mysql的事务特性都有什么？**
ACID 原子性、一致性、隔离性、持久性 大致解释了一下

**16、你做项目时遇见过数据库查询缓慢吗？当时是什么原因怎么解决的？**
刚开始有表设计方面问题，之后又发现在联合查询时没用到索引。

**17、如果你表里有一亿条数据怎么去有效的查询数据？**
(当时有点小懵，按理说不应该问索引引擎方面的问题吗？)答了mysql的分表，水平拆分和垂直拆分大致说了一下
这篇文章很好：
http://www.cnblogs.com/lonelyxmas/p/3632020.html

**18、除了分表还有其他方式吗？有用过大数据吗？了解过ai吗？**
(这才知道想问的是大数据)表示没学过大数据，但很愿意去学，因为大数据好多也是基于java的，之后肯定会学的。至于ai，之前课程里有用python写过一点很浅的东西，但深层次的不太了解

**19、出个逻辑题啊，一个5L杯子一个6L杯子从河里取水，怎么得到3L水？**
(有点猝不及防)让我想一下啊。。。过了10s左右。。。嘴里嘟囔着先考虑这种情况，先用6L的取满水倒5L杯子里，6L的就剩1L，再把5L的倒掉，再把6L剩余的倒5L杯子里面。。。(说着说着就畅快了，仿佛抓住了希望的那种感觉)



### 蚂蚁金服（秒杀系统项目）

一面是上海的小哥打来的，3.12号中午确认的内推，下午就打来约时间了，也是唯一一个约时间的面试官。约的晚上八点。紧张的一比，人生第一次面试就献给了阿里。

幸运的是一面的小哥特温柔。好像是个海归？口语中夹杂着英文。废话不多说，上干货：

面试官： 先自我介绍下吧！

我： 巴拉巴拉...。

关于自我介绍：从HR面、技术面到高管面/部门主管面，面试官一般会让你先自我介绍一下，所以好好准备自己的自我介绍真的非常重要。网上一般建议的是准备好两份自我介绍：一份对HR说的，主要讲能突出自己的经历，会的编程技术一语带过；另一份对技术面试官说的，主要讲自己会的技术细节，项目经验，经历那些就一语带过。

面试官： 我看你简历上写你做了个秒杀系统？我们就从这个项目开始吧，先介绍下你的项目。

关于项目介绍：如果有项目的话，技术面试第一步，面试官一般都是让你自己介绍一下你的项目。你可以从下面几个方向来考虑：

•对项目整体设计的一个感受（面试官可能会让你画系统的架构图）
•在这个项目中你负责了什么、做了什么、担任了什么角色
•从这个项目中你学会了那些东西，使用到了那些技术，学会了那些新技术的使用
•另外项目描述中，最好可以体现自己的综合素质，比如你是如何协调项目组成员协同开发的或者在遇到某一个棘手的问题的时候你是如何解决的又或者说你在这个项目用了什么技术实现了什么功能比如:用redis做缓存提高访问速度和并发量、使用消息队列削峰和降流等等。

我： 我说了我是如何考虑它的需求（秒杀地址隐藏，记录订单，减库存），一开始简单的用 synchronized 锁住方法，出现了问题，后来乐观锁改进，又有瓶颈，再上缓存，出现了缓存雪崩，于是缓存预热，错开缓存失效时间。最后，发现先记录订单再减库存会减少行级锁等待时间。

一面面试官很耐心地听，并给了我一些指导，问了我乐观锁是怎么实现的，我说是基于sql语句，在减库存操作的where条件里加剩余库存数>0，他说这应该不算是一种乐观锁，应该先查库存，在减库存的时候判断当前库存是否与读到的库存一样（可这样不是多一次查询操作吗？不是很理解，不过我没有反驳，只是说理解您的意思。事实证明千万别怼面试官，即使你觉得他说的不对）

面试官: 我缓存雪崩什么情况下会发生？如何避免？

我： 当多个商品缓存同时失效时会雪崩，导致大量查询数据库。还有就是秒杀刚开始的时候缓存里没有数据。解决方案：缓存预热，错开缓存失效时间

面试官： 问我更新数据库的同时为什么不马上更新缓存，而是删除缓存？

我： 因为考虑到更新数据库后更新缓存可能会因为多线程下导致写入脏数据（比如线程A先更新数据库成功，接下来要取更新缓存，接着线程B更新数据库，但B又更新了缓存，接着B的时间片用完了，线程A更新了缓存）

逼逼了将近30分钟，面试官居然用周杰伦的语气对我说：



我突然受宠若惊，连忙说谢谢，也正是因为第一次面试得到了面试官的肯定，才让我信心大增，二三面稳定发挥。

面试官又曰： 我看你还懂数据库是吧，答：略懂略懂。。。那我问个简单的吧！

我： 因为这个问题太简单了，所以我忘记它是什么了。

面试官： 你还会啥数据库知识？

我： 我一听，问的这么随意的吗。。。都让我选题了，我就说我了解索引，慢查询优化，巴拉巴拉

面试官： 等等，你说索引是吧，那你能说下索引的存储数据结构吗？

我： 我心想这简单啊，我就说B+树，还说了为什么用B+树

面试官： 你简历上写的这个J.U.C包是什么啊？（他居然不知道JUC）

我： 就是java多线程的那个包啊。。。

面试官： 那你都了解里面的哪些东西呢？

我： 哈哈哈！这可是我的强项，从ConcurrentHashMap，ConcurrentLinkedQueue说到CountDownLatch，CyclicBarrier，又说到线程池，分别说了底层实现和项目中的应用。

面试官: 我觉得差不多了，那我再问个与技术无关的问题哈，虽然这个问题可能不应该我问，就是你是如何考虑你的项目架构的呢？

我： 先用最简单的方式实现它，再去发掘系统的问题和瓶颈，于是查资料改进架构。。。

面试官： 好，那我给你介绍下我这边的情况吧



总结： 一面可能是简历面吧，问的比较简单，我在讲项目中说出了我做项目时的学习历程和思考，赢得了面试官的好感，感觉他应该给我的评价很好。

二面(33分钟左右)
然而开心了没一会，内推人问我面的怎么样啊？看我流程已经到大大boss那了。我一听二面不是主管吗？？？怎么直接跳了一面。于是瞬间慌了，赶紧（下床）学习准备二面。

隔了一天，3.14的早上10：56分，杭州的大大boss给我打来了电话，卧槽我当时在上毛概课，万恶的毛概课每节课都点名，我还在最后一排不敢跑出去。于是接起电话来怂怂地说不好意思我在上课，晚上可以面试吗？大大boss看来很忙啊，跟我说晚上没时间啊，再说吧！

于是又隔了一天，3.16中午我收到了北京的电话，当时心里小失望，我的大大boss呢？？？接起电话来，就是一番狂轰乱炸。。。

第一步还是先自我介绍，这个就不多说了，提前准备好要说的重点就没问题！

面试官: 我们还是从你的项目开始吧，说说你的秒杀系统。

我: 一面时的套路。。。我考虑到秒杀地址在开始前不应暴露给用户。。。

面试官: 等下啊，为什么要这样呢？暴露给用户会怎么样？

我: 用户提前知道秒杀地址就可以写脚本来抢购了，这样不公平

面试官: 那比如说啊，我现在是个黑客，我在秒杀开始时写好了脚本，运行一万个线程获取秒杀地址，这样是不是也不公平呢？

我： 我考虑到了这方面，于是我自己写了个LRU缓存（划重点，这么多好用的缓存我为啥不用偏要自己写？就是为了让面试官上钩问我是怎么写的，这样我就可以逼逼准备好的内容了！），用这个缓存存储请求的ip和用户名，一个ip和用户名只能同时透过3个请求。

面试官: 那我可不可以创建一个ip代理池和很多用户来抢购呢？假设我有很多手机号的账户。

我： 这就是在为难我胖虎啊，我说这种情况跟真实用户操作太像了。。。我没法区别，不过我觉得可以通过地理位置信息或者机器学习算法来做吧。。。

面试官: 好的这个问题就到这吧，你接着说

我： 我把生成订单和减库存两条sql语句放在一个事务里，都操作成功了则认为秒杀成功。

面试官: 等等，你这个订单表和商品库存表是在一个数据库的吧，那如果在不同的数据库中呢？

我: 这面试官好变态啊，我只是个本科生？！？！我觉得应该要用分布式锁来实现吧。。。

面试官: 有没有更轻量级的做法？

我: 不知道了。后来查资料发现可以用消息队列来实现。使用消息队列主要能带来两个好处：(1) 通过异步处理提高系统性能（削峰、减少响应所需时间）;(2) 降低系统耦合性。关于消息队列的更多内容可以查看这篇文章：https://snailclimb.gitee.io/javaguide/#/./system-design/data-communication/message-queue[1]

后来发现消息队列作用好大，于是现在在学手写一个消息队列。

面试官: 好的你接着说项目吧。

我: 我考虑到了缓存雪崩问题，于是。。。

面试官: 等等，你有没有考虑到一种情况，假如说你的缓存刚刚失效，大量流量就来查缓存，你的数据库会不会炸？

我: 我不知道数据库会不会炸，反正我快炸了。当时说没考虑这么高的并发量，后来发现也是可以用消息队列来解决，对流量削峰填谷。

面试官: 好项目聊（怼）完了，我们来说说别的，操作系统了解吧，你能说说NIO吗？

我: NIO是。。。

面试官: 那你知道NIO的系统调用有哪些吗，具体是怎么实现的？

我： 当时复习NIO的时候就知道是咋回事，不知道咋实现。最近在补这方面的知识，可见NIO还是很重要的！

面试官: 说说进程切换时操作系统都会发生什么？

我: 不如杀了我，我最讨厌操作系统了。简单说了下，可能不对，需要答案自行百度。

面试官: 说说线程池？

答： 卧槽这我熟啊，把Java并发编程的艺术里讲的都说出来了，说了得有十分钟，自夸一波，毕竟这本书我看了五遍?

面试官: 好问问计网吧如果设计一个聊天系统，应该用TCP还是UDP？为什么

我: 当然是TCP！原因如下：



面试官: 好的，你有什么要问我的吗？

我: 我还有下一次面试吗?

面试官： 应该。应该有的，一周内吧。还告诉我居然转正前要实习三个月？wtf，一个大三满课的本科生让我如何在八月底前实习三个月？

我： 面试官再见



三面(46分钟)
3.18号，三面来了，这次又是那个大大boss！

第一步还是先自我介绍，这个就不多说了，提前准备好要说的重点就没问题！

面试官: 聊聊你的项目？

我: 经过二面的教训，我迅速学习了一下分布式的理论知识，并应用到了我的项目（吹牛逼）中。

面试官: 看你用到了Spring的事务机制，你能说下Spring的事务传播吗？

我： 完了这个问题好像没准备，虽然之前刷知乎看到过。。。我就只说出来一条，面试官说其实这个有很多机制的，比如事务嵌套，内事务回滚外事务回滚都会有不同情况，你可以回去看看。

面试官: 说说你的分布式事务解决方案？

我: 我叭叭的照着资料查到的解决方案说了一通，面试官怎么好像没大听懂？？？

阿里巴巴之前开源了一个分布式 Fescar（一种易于使用，高性能，基于Java的开源分布式事务解决方案），后来，Ant Financial 加入Fescar，使其成为一个更加中立和开放的分布式交易社区，Fescar 重命名为Seata。Github 地址：https://github.com/seata/seata[2]

面试官: 好，我们聊聊其他项目，说说你这个 MapReduce项目？MapReduce原理了解过吗？

我: 我叭叭地说了一通，面试官好像觉得这个项目太简单了。要不是没项目，我会把我的实验写上吗？？？

面试官: 你这个手写BP神经网络是干了啥？

我: 这是我选修机器学习课程时的一个作业，我又对它进行了扩展。

面试官: 你能说说为什么调整权值时要沿着梯度下降的方向？

我: 老大，你太厉害了，怎么什么都懂。我压根没准备这个项目。。。没想到会问，做过去好几个月了，加上当时一紧张就忘了，后来想起来大概是....。

面试官: 好我们问问基础知识吧，说说什么叫xisuo？

我：？？？xisuo，您说什么，不好意思我没听清。（这面试官有点口音。。。）就是xisuo啊！xisuo你不知道吗？。。。尴尬了十几秒后我终于意识到，他在说死锁！！！

面试官: 假如A账户给B账户转钱，会发生xisuo吗？能具体说说吗？

我: 当时答的不好，后来发现面试官又是想问分布式，具体答案参考这个：https://blog.csdn.net/taylorchan2016/article/details/51039362[3]

面试官: 为什么不考研？

我： 不喜欢学术氛围，巴拉巴拉。

面试官: 你有什么问题吗？

我: 我还有下一面吗。。。面试官说让我等，一周内答复。

等了十天，一度以为我凉了，内推人说我流程到HR了，让我等着吧可能HR太忙了，3.28号HR打来了电话，当时在教室，我直接飞了出去。

HR面
面试官: 你好啊，先自我介绍下吧

我： 巴拉巴拉....HR面的技术面试和技术面的还是有所区别的！

面试官人特别好，一听就是很会说话的小姐姐！说我这里给你悄悄透露下，你的评级是 A 哦！



接下来就是几个经典HR面挂人的问题，什么难给我来什么，我看别人的HR面怎么都是聊聊天。。。

面试官: 你为什么选择支付宝呢，你怎么看待支付宝？

我: 我从个人情怀，公司理念，环境氛围，市场价值，趋势导向分析了一波（说白了就是疯狂夸支付宝，不过说实话我说的那些一点都没撒谎，阿里确实做到了。比如我举了个雷军和格力打赌5年2000亿销售额，大部分企业家关注的是利益，而马云更关注的是真的为人类为世界做一些事情，利益不是第一位的。）

面试官: 明白了解，那你的优点我们都很明了了，你能说说你的缺点吗？

缺点肯定不能是目标岗位需要的关键能力！！！

总之，记住一点，面试官问你这个问题的话，你可以说一些不影响你这个职位工作需要的一些缺点。比如你面试后端工程师，面试官问你的缺点是什么的话，你可以这样说：自己比较内向，平时不太爱与人交流，但是考虑到以后可能要和客户沟通，自己正在努力改。

我: 据说这是HR面最难的一个问题。。。我当时翻了好几天的知乎才找到一个合适的，也符合我的答案：我有时候会表现的不太自信，比如阿里的内推二月份就开始了，其实我当时已经复习了很久了，但是老是觉得自己还不行，不敢投简历，于是又把书看了一遍才投的，当时也是舍友怂恿一波才投的，面了之后发现其实自己也没有很差。（划重点，一定要把自己的缺点圆回来）。

面试官: HR好像不太满意我的答案，继续问我还有缺点吗？

我: 我说比较容易紧张吧，举了自己大一面实验室因为紧张没进去的例子，后来不断调整心态，现在已经好很多了。

接下来又是个好难的问题。

面试官： BAT都给你offer了，你怎么选？

其实我当时好想说，BT 是什么？不好意思我只知道阿里。

我 : 哈哈哈哈开玩笑，就说了阿里的文化，支付宝给我们带来很多便利，想加入支付宝为人类做贡献！